<view class="container data-v-5b7850a6"><view style="{{'height:'+(headerHeight+'px')+';'}}" class="data-v-5b7850a6"><uni-navbar vue-id="1" title="{{title}}" left-icon="back" background-color="#2d8cf0" color="#fff" status-bar fixed data-event-opts="{{[['^clickLeft',[['handleNavbarClickLeft']]]]}}" bind:clickLeft="__e" class="data-v-5b7850a6" bind:__l="__l"></uni-navbar></view><view class="main data-v-5b7850a6" style="{{'height:'+(mainHeight+'px')+';'}}"><scroll-view class="fill data-v-5b7850a6" scroll-y="{{true}}"><view class="data-v-5b7850a6"><cu-panel vue-id="2" class="data-v-5b7850a6" bind:__l="__l" vue-slots="{{['default']}}"><cu-cell vue-id="{{('3')+','+('2')}}" title="业务类型" isIcon icon="{{$root.a0}}" isLastCell class="data-v-5b7850a6" bind:__l="__l" vue-slots="{{['footer']}}"><radio-group class="h50 fc data-v-5b7850a6" slot="footer" data-event-opts="{{[['change',[['handleTypeChange',['$event']]]]]}}" bindchange="__e"><radio color="#2d8cf0" value="0" checked="{{businessType==0}}" class="data-v-5b7850a6">采购</radio><radio style="margin-left:10px;" color="#2d8cf0" value="1" checked="{{businessType==1}}" class="data-v-5b7850a6">销售</radio></radio-group></cu-cell></cu-panel></view><view style="margin-top:5px;" class="data-v-5b7850a6"><cu-panel vue-id="4" class="data-v-5b7850a6" bind:__l="__l" vue-slots="{{['default']}}"><cu-cell vue-id="{{('5')+','+('4')}}" isLastCell="{{!salesReqData.contactunitname||!purchaseReqData.contactunitname}}" title="搜索单位" isIcon icon="{{$root.a1}}" class="data-v-5b7850a6" bind:__l="__l" vue-slots="{{['footer']}}"><cu-search-bar style="width:100%;" vue-id="{{('6')+','+('5')}}" slot="footer" placeholder="速查码/名称/电话" cancelButton="none" data-ref="sc" data-event-opts="{{[['^input',[['handleSearchCurrentUnit']]],['^focus',[['handleSearchFocusCurrentUnit']]],['^clear',[['handleSearchClearCurrentUnit']]]]}}" bind:input="__e" bind:focus="__e" bind:clear="__e" class="data-v-5b7850a6 vue-ref" bind:__l="__l"></cu-search-bar></cu-cell><block wx:if="{{!searchCurrentUnit&&(salesReqData.contactunitname||purchaseReqData.contactunitname)}}"><cu-cell vue-id="{{('7')+','+('4')}}" title="单位名称" isSub isLastCell class="data-v-5b7850a6" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{businessType==0}}"><text class="h50 fc data-v-5b7850a6" slot="footer">{{purchaseReqData.contactunitname}}</text></block><block wx:else><text class="h50 fc data-v-5b7850a6" slot="footer">{{salesReqData.contactunitname}}</text></block></cu-cell></block></cu-panel></view><block wx:if="{{!searchCurrentUnit&&(salesReqData.contactunitname||purchaseReqData.contactunitname)}}"><view style="margin-top:5px;" class="data-v-5b7850a6"><cu-panel vue-id="8" class="data-v-5b7850a6" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{businessType==0}}"><cu-cell vue-id="{{('9')+','+('8')}}" title="选择订单" isLink url="./orders/orders" params="{{'businessType='+businessType+'&currentUnitId='+purchaseReqData.contactunitid}}" isIcon icon="{{$root.a2}}" class="data-v-5b7850a6" bind:__l="__l" vue-slots="{{['footer']}}"><view class="h50 fc data-v-5b7850a6" slot="footer"></view></cu-cell></block><block wx:else><block wx:if="{{businessType==1}}"><cu-cell vue-id="{{('10')+','+('8')}}" title="选择订单" isLink url="./orders/orders" params="{{'businessType='+businessType+'&currentUnitId='+salesReqData.contactunitid}}" isIcon icon="{{$root.a3}}" class="data-v-5b7850a6" bind:__l="__l" vue-slots="{{['footer']}}"><view class="h50 fc data-v-5b7850a6" slot="footer"></view></cu-cell></block></block></cu-panel></view></block><block wx:if="{{searchCurrentUnit}}"><view class="data-v-5b7850a6"><uni-list vue-id="11" class="data-v-5b7850a6" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{currentUnitSearchDatas}}" wx:for-item="item" wx:for-index="index" wx:key="index"><uni-list-item vue-id="{{('12-'+index)+','+('11')}}" title="{{item.contactunitname}}" note="{{['电话：'+item.bseContactUnitContactModels[0].telephone]}}" showArrow="{{false}}" data-event-opts="{{[['^tap',[['handleSelectCurrentUnit',['$0'],[[['currentUnitSearchDatas','',index]]]]]]]}}" bind:tap="__e" class="data-v-5b7850a6" bind:__l="__l"></uni-list-item></block></uni-list></view></block><view class="data-v-5b7850a6"><block wx:if="{{!searchCurrentUnit&&purchaseReqData.productList.length>0}}"><uni-list vue-id="13" class="data-v-5b7850a6" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{purchaseReqData.productList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><uni-list-item style="margin-left:10px;" vue-id="{{('14-'+index)+','+('13')}}" title="{{item.productname}}" showArrow="{{false}}" showIcon icon="{{$root.a4}}" note="{{['退货数量：'+item.qty,'计量单位：'+item.unit,'采购单价：'+item.purchaseunitprice]}}" data-event-opts="{{[['^clickContent',[['handleShowPopup',['$0'],[[['purchaseReqData.productList','',index]]]]]],['^clickFt',[['handleDelete',['$0'],[[['purchaseReqData.productList','',index]]]]]]]}}" bind:clickContent="__e" bind:clickFt="__e" class="data-v-5b7850a6" bind:__l="__l"></uni-list-item></block></uni-list></block></view><view class="data-v-5b7850a6"><block wx:if="{{!searchCurrentUnit&&salesReqData.productList.length>0}}"><uni-list vue-id="15" class="data-v-5b7850a6" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{salesReqData.productList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><uni-list-item style="margin-left:10px;" vue-id="{{('16-'+index)+','+('15')}}" title="{{item.productname}}" showArrow="{{false}}" showIcon icon="{{$root.a5}}" note="{{['销售数量：'+item.salesqty,'计量单位：'+item.unit,'销售单价：'+item.salesunitprice]}}" data-event-opts="{{[['^clickContent',[['handleShowPopup',['$0'],[[['salesReqData.productList','',index]]]]]],['^clickFt',[['handleDelete',['$0'],[[['salesReqData.productList','',index]]]]]]]}}" bind:clickContent="__e" bind:clickFt="__e" class="data-v-5b7850a6" bind:__l="__l"></uni-list-item></block></uni-list></block></view></scroll-view></view><view class="footer data-v-5b7850a6"><view class="footer-text data-v-5b7850a6"><view class="footer-text-item data-v-5b7850a6"><text class="data-v-5b7850a6">小计数量：</text><block wx:if="{{businessType==0}}"><text style="color:#ef5a62;" class="data-v-5b7850a6">{{purchaseReqData.totalCount}}</text></block><block wx:else><text style="color:#ef5a62;" class="data-v-5b7850a6">{{"￥"+salesReqData.totalCount}}</text></block></view><view class="footer-text-item data-v-5b7850a6"><text class="data-v-5b7850a6">小计金额：</text><block wx:if="{{businessType==0}}"><text style="color:#ef5a62;" class="data-v-5b7850a6">{{"￥"+purchaseReqData.totalPrice}}</text></block><block wx:else><text style="color:#ef5a62;" class="data-v-5b7850a6">{{"￥"+salesReqData.totalPrice}}</text></block></view></view><button class="footer-btn data-v-5b7850a6" style="background-color:#2d8cf0;" type="primary" disabled="{{disableSubmit}}" data-event-opts="{{[['tap',[['handleNext',['$event']]]]]}}" bindtap="__e">{{submitText}}</button></view><uni-popup vue-id="17" type="bottom" data-ref="purchasePopup" class="data-v-5b7850a6 vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><cu-panel vue-id="{{('18')+','+('17')}}" class="data-v-5b7850a6" bind:__l="__l" vue-slots="{{['default']}}"><cu-cell vue-id="{{('19')+','+('18')}}" title="数量" isLastCell class="data-v-5b7850a6" bind:__l="__l" vue-slots="{{['footer','footer2']}}"><uni-number-box vue-id="{{('20')+','+('19')}}" slot="footer" min="{{1}}" max="{{maxNum}}" valWidth="100" btWidth="50" width="200" value="{{curSelectPruduct.qty}}" data-event-opts="{{[['^change',[['handleQtyChange']]]]}}" bind:change="__e" class="data-v-5b7850a6" bind:__l="__l"></uni-number-box><view slot="footer2" class="data-v-5b7850a6"><view class="popup-qty-items data-v-5b7850a6"><view data-event-opts="{{[['tap',[['handleSelectQty',[10]]]]]}}" class="popup-qty-items-item data-v-5b7850a6" style="background-color:#92cbfb;" bindtap="__e">10</view><view data-event-opts="{{[['tap',[['handleSelectQty',[50]]]]]}}" class="popup-qty-items-item data-v-5b7850a6" style="margin-left:15px;background-color:#92cbfb;" bindtap="__e">50</view><view data-event-opts="{{[['tap',[['handleSelectQty',[100]]]]]}}" class="popup-qty-items-item data-v-5b7850a6" style="margin-left:15px;background-color:#fd7654;" bindtap="__e">100</view><view data-event-opts="{{[['tap',[['handleSelectQty',[300]]]]]}}" class="popup-qty-items-item data-v-5b7850a6" style="margin-left:15px;background-color:#fd7654;" bindtap="__e">300</view></view></view></cu-cell></cu-panel><button style="background-color:#2d8cf0;" type="primary" data-event-opts="{{[['tap',[['handleEdit',['$event']]]]]}}" bindtap="__e" class="data-v-5b7850a6">确定</button></uni-popup><uni-popup vue-id="21" type="bottom" data-ref="salePopup" class="data-v-5b7850a6 vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><cu-panel vue-id="{{('22')+','+('21')}}" class="data-v-5b7850a6" bind:__l="__l" vue-slots="{{['default']}}"><cu-cell vue-id="{{('23')+','+('22')}}" title="数量" isLastCell class="data-v-5b7850a6" bind:__l="__l" vue-slots="{{['footer','footer2']}}"><uni-number-box vue-id="{{('24')+','+('23')}}" slot="footer" min="{{1}}" max="{{maxNum}}" valWidth="100" btWidth="50" width="200" value="{{curSelectPruduct.salesqty}}" data-event-opts="{{[['^change',[['handleQtyChange']]]]}}" bind:change="__e" class="data-v-5b7850a6" bind:__l="__l"></uni-number-box><view slot="footer2" class="data-v-5b7850a6"><view class="popup-qty-items data-v-5b7850a6"><view data-event-opts="{{[['tap',[['handleSelectQty',[10]]]]]}}" class="popup-qty-items-item data-v-5b7850a6" style="background-color:#92cbfb;" bindtap="__e">10</view><view data-event-opts="{{[['tap',[['handleSelectQty',[50]]]]]}}" class="popup-qty-items-item data-v-5b7850a6" style="margin-left:15px;background-color:#92cbfb;" bindtap="__e">50</view><view data-event-opts="{{[['tap',[['handleSelectQty',[100]]]]]}}" class="popup-qty-items-item data-v-5b7850a6" style="margin-left:15px;background-color:#fd7654;" bindtap="__e">100</view><view data-event-opts="{{[['tap',[['handleSelectQty',[300]]]]]}}" class="popup-qty-items-item data-v-5b7850a6" style="margin-left:15px;background-color:#fd7654;" bindtap="__e">300</view></view></view></cu-cell></cu-panel><button style="background-color:#2d8cf0;" type="primary" data-event-opts="{{[['tap',[['handleEdit',['$event']]]]]}}" bindtap="__e" class="data-v-5b7850a6">确定</button></uni-popup></view>