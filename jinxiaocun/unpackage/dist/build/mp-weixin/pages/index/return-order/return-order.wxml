<view class="container data-v-160d9b46"><view style="{{'height:'+(headerHeight+'px')+';'}}" class="data-v-160d9b46"><uni-navbar vue-id="1" title="{{title}}" left-icon="back" background-color="#2d8cf0" color="#fff" status-bar fixed data-event-opts="{{[['^clickLeft',[['handleNavbarClickLeft']]]]}}" bind:clickLeft="__e" class="data-v-160d9b46" bind:__l="__l"></uni-navbar></view><view class="main data-v-160d9b46" style="{{'height:'+(mainHeight+'px')+';'}}"><scroll-view class="fill data-v-160d9b46" scroll-y="{{true}}"><cu-panel vue-id="2" class="data-v-160d9b46" bind:__l="__l" vue-slots="{{['default']}}"><cu-cell-group vue-id="{{('3')+','+('2')}}" class="data-v-160d9b46" bind:__l="__l" vue-slots="{{['default']}}"><cu-cell vue-id="{{('4')+','+('3')}}" title="业务类型" class="data-v-160d9b46" bind:__l="__l" vue-slots="{{['default']}}"><radio-group data-event-opts="{{[['change',[['handleTypeChange',['$event']]]]]}}" bindchange="__e" class="data-v-160d9b46"><radio color="#2d8cf0" value="0" checked="{{businessType==0}}" class="data-v-160d9b46">采购退货</radio><radio style="margin-left:10px;" color="#2d8cf0" value="1" checked="{{businessType==1}}" class="data-v-160d9b46">销售退货</radio></radio-group></cu-cell><cu-cell vue-id="{{('5')+','+('3')}}" title="搜索单位" class="data-v-160d9b46" bind:__l="__l" vue-slots="{{['default']}}"><cu-search-bar style="width:67%;" vue-id="{{('6')+','+('5')}}" placeholder="输入速查码/名称/电话" cancelButton="none" data-ref="sc" data-event-opts="{{[['^input',[['handleSearchCurrentUnit']]]]}}" bind:input="__e" class="data-v-160d9b46 vue-ref" bind:__l="__l"></cu-search-bar></cu-cell><block wx:if="{{!searchCurrentUnit}}"><cu-cell vue-id="{{('7')+','+('3')}}" title="单位名称" class="data-v-160d9b46" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{businessType==0}}"><text slot="footer" class="data-v-160d9b46">{{purchaseReqData.contactunitname}}</text></block><block wx:else><text slot="footer" class="data-v-160d9b46">{{salesReqData.contactunitname}}</text></block></cu-cell></block><block wx:if="{{!searchCurrentUnit&&businessType==0}}"><cu-cell vue-id="{{('8')+','+('3')}}" title="选择订单" isLink url="./orders/orders" params="{{'businessType='+businessType+'&currentUnitId='+purchaseReqData.contactunitid}}" class="data-v-160d9b46" bind:__l="__l"></cu-cell></block><block wx:else><block wx:if="{{!searchCurrentUnit&&businessType==1}}"><cu-cell vue-id="{{('9')+','+('3')}}" title="选择订单" isLink url="./orders/orders" params="{{'businessType='+businessType+'&currentUnitId='+salesReqData.contactunitid}}" class="data-v-160d9b46" bind:__l="__l"></cu-cell></block></block></cu-cell-group></cu-panel><block wx:if="{{searchCurrentUnit}}"><cu-panel vue-id="10" class="data-v-160d9b46" bind:__l="__l" vue-slots="{{['default']}}"><uni-list vue-id="{{('11')+','+('10')}}" class="data-v-160d9b46" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{currentUnitSearchDatas}}" wx:for-item="item" wx:for-index="index" wx:key="index"><uni-list-item vue-id="{{('12-'+index)+','+('11')}}" title="{{item.contactunitname}}" note="{{'电话：'+item.bseContactUnitContactModels[0].telephone}}" showArrow="{{false}}" data-event-opts="{{[['^tap',[['handleSelectCurrentUnit',['$0'],[[['currentUnitSearchDatas','',index]]]]]]]}}" bind:tap="__e" class="data-v-160d9b46" bind:__l="__l"></uni-list-item></block></uni-list></cu-panel></block><block wx:if="{{!searchCurrentUnit&&purchaseReqData.productList.length>0}}"><cu-panel vue-id="13" class="data-v-160d9b46" bind:__l="__l" vue-slots="{{['default']}}"><cu-cell-group vue-id="{{('14')+','+('13')}}" class="data-v-160d9b46" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{purchaseReqData.productList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><cu-cell vue-id="{{('15-'+index)+','+('14')}}" title="{{item.productname}}" label="{{'采购数量：'+item.qty+'|计量单位：'+item.unit+'|采购单价：'+item.purchaseunitprice}}" data-event-opts="{{[['^tap',[['handleShowPopup',['$0'],[[['purchaseReqData.productList','',index]]]]]]]}}" bind:tap="__e" class="data-v-160d9b46" bind:__l="__l" vue-slots="{{['footer']}}"><view style="color:#808695;" slot="footer" data-event-opts="{{[['tap',[['handleDelete',['$0'],[[['purchaseReqData.productList','',index]]]]]]]}}" bindtap="__e" class="data-v-160d9b46"><uni-icons vue-id="{{('16-'+index)+','+('15-'+index)}}" type="delete" color="#ed3f14" class="data-v-160d9b46" bind:__l="__l"></uni-icons></view></cu-cell></block></cu-cell-group></cu-panel></block><block wx:if="{{!searchCurrentUnit&&salesReqData.productList.length>0}}"><cu-panel vue-id="17" class="data-v-160d9b46" bind:__l="__l" vue-slots="{{['default']}}"><cu-cell-group vue-id="{{('18')+','+('17')}}" class="data-v-160d9b46" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{salesReqData.productList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><cu-cell vue-id="{{('19-'+index)+','+('18')}}" title="{{item.productname}}" label="{{'销售数量：'+item.salesqty+'|计量单位：'+item.unit+'|销售单价：'+item.salesunitprice}}" data-event-opts="{{[['^tap',[['handleShowPopup',['$0'],[[['salesReqData.productList','',index]]]]]]]}}" bind:tap="__e" class="data-v-160d9b46" bind:__l="__l" vue-slots="{{['footer']}}"><view style="color:#808695;" slot="footer" data-event-opts="{{[['tap',[['handleDelete',['$0'],[[['salesReqData.productList','',index]]]]]]]}}" bindtap="__e" class="data-v-160d9b46"><uni-icons vue-id="{{('20-'+index)+','+('19-'+index)}}" type="delete" color="#ed3f14" class="data-v-160d9b46" bind:__l="__l"></uni-icons></view></cu-cell></block></cu-cell-group></cu-panel></block></scroll-view></view><view class="footer data-v-160d9b46"><block wx:if="{{businessType==0}}"><text class="footer-text data-v-160d9b46">{{"合计金额：￥"+purchaseReqData.totalPrice}}</text></block><block wx:else><text class="footer-text data-v-160d9b46">{{"合计金额：￥"+salesReqData.totalPrice}}</text></block><button class="footer-btn data-v-160d9b46" style="background-color:#2d8cf0;" type="primary" disabled="{{disableSubmit}}" data-event-opts="{{[['tap',[['handleNext',['$event']]]]]}}" bindtap="__e">下一步</button></view><uni-popup vue-id="21" type="bottom" data-ref="purchasePopup" class="data-v-160d9b46 vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><cu-panel vue-id="{{('22')+','+('21')}}" class="data-v-160d9b46" bind:__l="__l" vue-slots="{{['default']}}"><cu-cell vue-id="{{('23')+','+('22')}}" title="数量" class="data-v-160d9b46" bind:__l="__l" vue-slots="{{['default']}}"><uni-number-box vue-id="{{('24')+','+('23')}}" min="{{1}}" max="{{maxNum}}" value="{{curSelectPruduct.qty}}" data-event-opts="{{[['^change',[['handleQtyChange']]]]}}" bind:change="__e" class="data-v-160d9b46" bind:__l="__l"></uni-number-box></cu-cell></cu-panel><button style="background-color:#2d8cf0;" type="primary" data-event-opts="{{[['tap',[['handleEdit',['$event']]]]]}}" bindtap="__e" class="data-v-160d9b46">确定</button></uni-popup><uni-popup vue-id="25" type="bottom" data-ref="salePopup" class="data-v-160d9b46 vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><cu-panel vue-id="{{('26')+','+('25')}}" class="data-v-160d9b46" bind:__l="__l" vue-slots="{{['default']}}"><cu-cell vue-id="{{('27')+','+('26')}}" title="数量" class="data-v-160d9b46" bind:__l="__l" vue-slots="{{['default']}}"><uni-number-box vue-id="{{('28')+','+('27')}}" min="{{1}}" max="{{maxNum}}" value="{{curSelectPruduct.salesqty}}" data-event-opts="{{[['^change',[['handleQtyChange']]]]}}" bind:change="__e" class="data-v-160d9b46" bind:__l="__l"></uni-number-box></cu-cell></cu-panel><button style="background-color:#2d8cf0;" type="primary" data-event-opts="{{[['tap',[['handleEdit',['$event']]]]]}}" bindtap="__e" class="data-v-160d9b46">确定</button></uni-popup></view>