<view class="container data-v-b7f2b452"><view style="{{'height:'+(headerHeight+'px')+';'}}" class="data-v-b7f2b452"><uni-navbar vue-id="1" title="{{title}}" left-icon="back" background-color="#2d8cf0" color="#fff" status-bar fixed data-event-opts="{{[['^clickLeft',[['handleNavbarClickLeft']]]]}}" bind:clickLeft="__e" class="data-v-b7f2b452" bind:__l="__l"></uni-navbar></view><view class="main data-v-b7f2b452" style="{{'height:'+(mainHeight+'px')+';'}}"><scroll-view class="fill data-v-b7f2b452" scroll-y="{{true}}"><view class="data-v-b7f2b452"><cu-panel vue-id="2" class="data-v-b7f2b452" bind:__l="__l" vue-slots="{{['default']}}"><cu-cell vue-id="{{('3')+','+('2')}}" isLastCell="{{!reqData.contactunitname}}" title="搜索单位" isIcon icon="{{$root.a0}}" disVerMessage="{{verify.contactunitname.disVerMessage}}" verify="{{verify.contactunitname.message}}" class="data-v-b7f2b452" bind:__l="__l" vue-slots="{{['footer']}}"><cu-search-bar style="width:100%;" vue-id="{{('4')+','+('3')}}" slot="footer" placeholder="速查码/名称/电话" cancelButton="none" data-ref="sc" data-event-opts="{{[['^input',[['handleSearchCurrentUnit']]],['^focus',[['handleSearchFocusCurrentUnit']]],['^clear',[['handleSearchClearCurrentUnit']]]]}}" bind:input="__e" bind:focus="__e" bind:clear="__e" class="data-v-b7f2b452 vue-ref" bind:__l="__l"></cu-search-bar></cu-cell><block wx:if="{{!searchCurrentUnit&&reqData.contactunitname}}"><cu-cell vue-id="{{('5')+','+('2')}}" title="单位名称" isSub class="data-v-b7f2b452" bind:__l="__l" vue-slots="{{['footer']}}"><input class="form-input data-v-b7f2b452" slot="footer" type="text" focus data-event-opts="{{[['input',[['__set_model',['$0','contactunitname','$event',[]],['reqData']]]]]}}" value="{{reqData.contactunitname}}" bindinput="__e"/></cu-cell></block><block wx:if="{{!searchCurrentUnit&&reqData.telephone}}"><cu-cell vue-id="{{('6')+','+('2')}}" isLastCell title="电话" isSub class="data-v-b7f2b452" bind:__l="__l" vue-slots="{{['footer']}}"><input class="form-input data-v-b7f2b452" slot="footer" type="number" data-event-opts="{{[['input',[['__set_model',['$0','telephone','$event',[]],['reqData']]]]]}}" value="{{reqData.telephone}}" bindinput="__e"/></cu-cell></block></cu-panel></view><view style="margin-top:5px;" class="data-v-b7f2b452"><cu-panel vue-id="7" class="data-v-b7f2b452" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{!searchCurrentUnit}}"><cu-cell vue-id="{{('8')+','+('7')}}" isLastCell title="选择产品" isIcon icon="{{$root.a1}}" disVerMessage="{{verify.productList.disVerMessage}}" verify="{{verify.productList.message}}" class="data-v-b7f2b452" bind:__l="__l" vue-slots="{{['footer']}}"><cu-search-bar style="width:100%;" vue-id="{{('9')+','+('8')}}" slot="footer" placeholder="速查码/名称" cancelButton="none" data-ref="sp" data-event-opts="{{[['^input',[['handleSearchProduct']]],['^focus',[['handleSearchFocusProduct']]],['^clear',[['handleSearchClearProduct']]]]}}" bind:input="__e" bind:focus="__e" bind:clear="__e" class="data-v-b7f2b452 vue-ref" bind:__l="__l"></cu-search-bar></cu-cell></block></cu-panel></view><block wx:if="{{searchCurrentUnit||searchProduct}}"><view class="data-v-b7f2b452"><block wx:if="{{searchCurrentUnit}}"><uni-list vue-id="10" class="data-v-b7f2b452" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{currentUnitSearchDatas}}" wx:for-item="item" wx:for-index="index" wx:key="index"><uni-list-item vue-id="{{('11-'+index)+','+('10')}}" title="{{item.contactunitname}}" note="{{['速查码：'+item.querycode,'电话：'+item.bseContactUnitContactModels[0].telephone]}}" showArrow="{{false}}" data-event-opts="{{[['^tap',[['handleSelectCurrentUnit',['$0'],[[['currentUnitSearchDatas','',index]]]]]]]}}" bind:tap="__e" class="data-v-b7f2b452" bind:__l="__l"></uni-list-item></block></uni-list></block><block wx:if="{{searchProduct}}"><uni-list vue-id="12" class="data-v-b7f2b452" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{productSearchDatas}}" wx:for-item="item" wx:for-index="index" wx:key="index"><uni-list-item vue-id="{{('13-'+index)+','+('12')}}" title="{{item.productname}}" note="{{['速查码：'+item.querycode,'零售价：'+item.price]}}" showArrow="{{false}}" data-event-opts="{{[['^tap',[['handleSelectProduct',['$0'],[[['productSearchDatas','',index]]]]]]]}}" bind:tap="__e" class="data-v-b7f2b452" bind:__l="__l"></uni-list-item></block></uni-list></block></view></block><view class="data-v-b7f2b452"><block wx:if="{{!searchCurrentUnit&&!searchProduct&&reqData.productList.length>0}}"><uni-list vue-id="14" class="data-v-b7f2b452" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{reqData.productList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><uni-list-item style="margin-left:10px;" vue-id="{{('15-'+index)+','+('14')}}" title="{{item.productname}}" showArrow="{{false}}" showIcon icon="{{$root.a2}}" note="{{item.ismainunit?['销售数量：'+item.salesqty,'销售单价：'+item.salesunitprice,'计量单位：'+item.unit]:['销售数量：'+item.assistunitqty,'销售单价：'+item.assissalesunitprice,'计量单位：'+item.unit]}}" data-event-opts="{{[['^clickContent',[['handleShowPopup',[index,'$0'],[[['reqData.productList','',index]]]]]],['^clickFt',[['handleDelete',[index,'$0'],[[['reqData.productList','',index]]]]]]]}}" bind:clickContent="__e" bind:clickFt="__e" class="data-v-b7f2b452" bind:__l="__l"></uni-list-item></block></uni-list></block></view></scroll-view></view><view class="footer data-v-b7f2b452"><view class="footer-text data-v-b7f2b452"><view class="footer-text-item data-v-b7f2b452"><text class="data-v-b7f2b452">小计数量：</text><text style="color:#f4613d;" class="data-v-b7f2b452">{{reqData.totalCount}}</text></view><view class="footer-text-item data-v-b7f2b452"><text class="data-v-b7f2b452">小计金额：</text><text style="color:#f4613d;" class="data-v-b7f2b452">{{"￥"+reqData.totalPrice}}</text></view></view><button class="footer-btn data-v-b7f2b452" style="background-color:#2d8cf0;" type="primary" data-event-opts="{{[['tap',[['handleNext',['$event']]]]]}}" bindtap="__e">收款</button></view><uni-popup vue-id="16" type="bottom" data-ref="popup" class="data-v-b7f2b452 vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><view class="popup-wrap data-v-b7f2b452"><view class="popup-wrap-header data-v-b7f2b452"></view><view class="popup-wrap-content data-v-b7f2b452"><cu-panel vue-id="{{('17')+','+('16')}}" class="data-v-b7f2b452" bind:__l="__l" vue-slots="{{['default']}}"><cu-cell vue-id="{{('18')+','+('17')}}" title="产品名称" class="data-v-b7f2b452" bind:__l="__l" vue-slots="{{['footer']}}"><view class="h50 fc data-v-b7f2b452" slot="footer">{{curSelectPruduct.productname}}</view></cu-cell><cu-cell vue-id="{{('19')+','+('17')}}" title="计量单位" class="data-v-b7f2b452" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{curSelectPruduct.isMultiUnit}}"><radio-group class="h50 fc data-v-b7f2b452" slot="footer" data-event-opts="{{[['change',[['handleUnitChange',['$event']]]]]}}" bindchange="__e"><radio color="#2db7f5" value="1" checked="{{curSelectPruduct.ismainunit==1}}" class="data-v-b7f2b452">{{curSelectPruduct.mainUnit}}</radio><radio style="margin-left:10px;" color="#2db7f5" value="0" checked="{{curSelectPruduct.ismainunit==0}}" class="data-v-b7f2b452">{{curSelectPruduct.subUnit}}</radio></radio-group></block><block wx:else><view class="h50 fc data-v-b7f2b452" slot="footer">{{curSelectPruduct.mainUnit}}</view></block></cu-cell><cu-cell vue-id="{{('20')+','+('17')}}" title="数量" class="data-v-b7f2b452" bind:__l="__l" vue-slots="{{['default','footer2']}}"><block wx:if="{{curSelectPruduct.ismainunit}}"><uni-number-box vue-id="{{('21')+','+('20')}}" slot="footer" min="{{1}}" max="{{999999}}" valWidth="100" btWidth="50" width="200" value="{{curSelectPruduct.salesqty}}" data-event-opts="{{[['^change',[['handleSalesqtyChange']]]]}}" bind:change="__e" class="data-v-b7f2b452" bind:__l="__l"></uni-number-box></block><block wx:else><uni-number-box vue-id="{{('22')+','+('20')}}" slot="footer" min="{{1}}" max="{{999999}}" valWidth="100" btWidth="50" width="200" value="{{curSelectPruduct.assistunitqty}}" data-event-opts="{{[['^change',[['handleSalesqtyChange']]]]}}" bind:change="__e" class="data-v-b7f2b452" bind:__l="__l"></uni-number-box></block><view slot="footer2" class="data-v-b7f2b452"><view class="popup-qty-items data-v-b7f2b452"><view data-event-opts="{{[['tap',[['handleSelectQty',[10]]]]]}}" class="popup-qty-items-item data-v-b7f2b452" style="background-color:#92cbfb;" bindtap="__e">10</view><view data-event-opts="{{[['tap',[['handleSelectQty',[50]]]]]}}" class="popup-qty-items-item data-v-b7f2b452" style="margin-left:15px;background-color:#92cbfb;" bindtap="__e">50</view><view data-event-opts="{{[['tap',[['handleSelectQty',[100]]]]]}}" class="popup-qty-items-item data-v-b7f2b452" style="margin-left:15px;background-color:#fd7654;" bindtap="__e">100</view><view data-event-opts="{{[['tap',[['handleSelectQty',[300]]]]]}}" class="popup-qty-items-item data-v-b7f2b452" style="margin-left:15px;background-color:#fd7654;" bindtap="__e">300</view></view></view></cu-cell><cu-cell vue-id="{{('23')+','+('17')}}" title="单价" isLastCell class="data-v-b7f2b452" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{curSelectPruduct.ismainunit}}"><input class="h50 data-v-b7f2b452" slot="footer" type="digit" placeholder="0.00" data-event-opts="{{[['blur',[['handlePriceBlur',['$event']]]],['input',[['__set_model',['$0','salesunitprice','$event',[]],['curSelectPruduct']]]]]}}" value="{{curSelectPruduct.salesunitprice}}" bindblur="__e" bindinput="__e"/></block><block wx:else><input class="h50 data-v-b7f2b452" slot="footer" type="digit" placeholder="0.00" data-event-opts="{{[['blur',[['handlePriceBlur',['$event']]]],['input',[['__set_model',['$0','assissalesunitprice','$event',[]],['curSelectPruduct']]]]]}}" value="{{curSelectPruduct.assissalesunitprice}}" bindblur="__e" bindinput="__e"/></block></cu-cell></cu-panel></view><view class="popup-wrap-footer data-v-b7f2b452"><button class="popup-wrap-footer-cancel data-v-b7f2b452" type="primary" data-event-opts="{{[['tap',[['handleCancel',['$event']]]]]}}" bindtap="__e">取消</button><button class="popup-wrap-footer-submit data-v-b7f2b452" type="primary" data-event-opts="{{[['tap',[['handleEdit',['$event']]]]]}}" bindtap="__e">确定</button></view></view></uni-popup></view>