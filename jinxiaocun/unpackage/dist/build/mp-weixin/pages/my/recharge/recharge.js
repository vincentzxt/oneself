(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/recharge/recharge","components/custom/cu-loading"],{1226:function(e,t,n){"use strict";var o=n("d551"),a=n.n(o);a.a},"30a7":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("94a7"),a=n("f45c");i(n("a8d7"));function i(e){return e&&e.__esModule?e:{default:e}}var c=function(){return n.e("components/uni-list/uni-list").then(n.bind(null,"3140"))},s=function(){return n.e("components/uni-list-item/uni-list-item").then(n.bind(null,"d2d2"))},r=function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"af96"))},u=function(){return n.e("components/wuc-tab/wuc-tab").then(n.bind(null,"4f14"))},l=function(){return n.e("components/helang-checkbox/helang-checkbox").then(n.bind(null,"a523"))},d={components:{uniLoadMore:r,uniList:c,uniListItem:s,WucTab:u,"helang-checkbox":l},data:function(){return{loadmore:"more",pageIndex:0,pageRows:15,title:"续费/订单",pickerIndex:2,TabCur:0,content_show_id:0,dataList:[],ordertype:"1,2",tabList:[{name:"续费"},{name:"我的订单"}],OrderStatusList:["待支付","已支付"],PayTypeList:{0:"",1:"银行账号",2:"微信",3:"支付宝",4:"现金"},productList:[]}},onLoad:function(){this.pickerIndex=3,this.loadData(),this.loadProduct()},onShow:function(){},mounted:function(){},methods:{handleRefreshPage:function(){console.log("refreshpage")},handleNavbarClickLeft:function(){e.navigateBack({delta:1})},tabChange:function(e){switch(console.log(e),e){case 0:this.content_show_id=0,this.$refs.checkbox.set({type:"radio",column:2,list:this.list}),this.pickerIndex=3;break;case 1:this.content_show_id=1;break;default:this.content_show_id=0;break}},weixinPay:function(){var t=this;console.log("发起支付"),this.$refs.loading.open(),e.login({success:function(n){console.log("login success",n),e.request({url:"https://unidemo.dcloud.net.cn/payment/wx/mp?code=".concat(n.code,"&amount=").concat(t.price),success:function(n){if(console.log("pay request success",n),200===n.statusCode)if(0===n.data.ret){console.log("得到接口prepay_id",n.data.payment);var o=n.data.payment;e.requestPayment({timeStamp:o.timeStamp,nonceStr:o.nonceStr,package:o.package,signType:"MD5",paySign:o.paySign,success:function(t){e.showToast({title:"感谢您的赞助!"})},fail:function(t){e.showModal({content:"支付失败,原因为: "+t.errMsg,showCancel:!1})},complete:function(){t.loading=!1}})}else e.showModal({content:n.data.desc,showCancel:!1});else e.showModal({content:"支付失败，请重试！",showCancel:!1})},fail:function(n){console.log("fail",n),t.loading=!1,e.showModal({content:"支付失败,原因为: "+n.errMsg,showCancel:!1})}})},fail:function(n){console.log("fail",n),t.loading=!1,e.showModal({content:"支付失败,原因为: "+n.errMsg,showCancel:!1})}})},handleSubmit:function(){var t=this;console.log("发起支付"),this.$refs.loading.open(),e.login({success:function(n){console.log("login success",n);var i=t.$refs.checkbox.get();if(i){var c={productid:i.productid};(0,o.tokenpost)(a.api.AddOrder,c).then(function(n){if(200==n.status&&"0000"==n.data.returnCode){console.log("得到接口prepay_id",n.data.payment);var o=n.data.payment;e.requestPayment({timeStamp:o.timeStamp,nonceStr:o.nonceStr,package:o.package,signType:"MD5",paySign:o.paySign,success:function(t){e.showToast({title:"支付成功!"})},fail:function(t){e.showModal({content:"支付失败,原因为: "+t.errMsg,showCancel:!1})},complete:function(){t.$refs.loading.close()}})}else t.$refs.loading.close(),t.$api.msg(n.data.returnMessage)}).catch(function(e){t.$refs.loading.close(),t.$api.msg("请求失败fail")})}else t.$api.msg("请选择要购买的产品!")},fail:function(n){console.log("fail",n),t.loading=!1,e.showModal({content:"支付失败,原因为: "+n.errMsg,showCancel:!1})}})},loadProduct:function(){var e=this;this.$refs.loading.open();var t={pageIndex:1,pageRows:-1,ordertype:this.ordertype,exchangeintegralbegin:1};(0,o.tokenpost)(a.api.GetProductList,t).then(function(t){e.$refs.loading.close(),200==t.status&&"0000"==t.data.returnCode?(e.productList=t.data.data.resultList,console.log(e.productList)):e.$api.msg(t.data.returnMessage)}).catch(function(t){e.loadmore="more",e.$refs.loading.close(),e.$api.msg("请求失败fail")})},loadData:function(){var e=this;this.loadmore="loading",this.$refs.loading.open();var t={pageIndex:this.pageIndex+1,pageRows:this.pageRows};(0,o.tokenpost)(a.api.GetOrderList,t).then(function(t){if(e.$refs.loading.close(),200==t.status&&"0000"==t.data.returnCode){if(0===t.data.data.resultList.length)return void(e.loadmore="noMore");e.dataList=e.dataList.concat(t.data.data.resultList),e.pageIndex=e.pageIndex+1,e.loadmore="more"}else e.loadmore="more",e.$api.msg(t.data.returnMessage)}).catch(function(t){e.loadmore="more",e.$refs.loading.close(),e.$api.msg("请求失败fail")})}}};t.default=d}).call(this,n("543d")["default"])},"31e9":function(e,t,n){"use strict";var o,a=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"b",function(){return a}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return o})},"401c":function(e,t,n){"use strict";n.r(t);var o=n("31e9"),a=n("7072");for(var i in a)"default"!==i&&function(e){n.d(t,e,function(){return a[e]})}(i);n("6056");var c,s=n("f0c5"),r=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,"4f5c65be",null,!1,o["a"],c);t["default"]=r.exports},5088:function(e,t,n){"use strict";n.r(t);var o=n("8287"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);t["default"]=a.a},6056:function(e,t,n){"use strict";var o=n("8e16"),a=n.n(o);a.a},7072:function(e,t,n){"use strict";n.r(t);var o=n("30a7"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);t["default"]=a.a},8287:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"cu-loading",data:function(){return{show:!1,text:"加载中...",mask:!0,click:!0}},methods:{preventTouchMove:function(){console.log("stop user scroll it!")},Mclose:function(){"false"!=this.click&&0!=this.click||(this.show=!1)},open:function(){this.show=!0},close:function(){this.show=!1}}};t.default=o},"8e16":function(e,t,n){},a8d7:function(e,t,n){"use strict";n.r(t);var o=n("c925"),a=n("5088");for(var i in a)"default"!==i&&function(e){n.d(t,e,function(){return a[e]})}(i);n("1226");var c,s=n("f0c5"),r=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,"48bbf381",null,!1,o["a"],c);t["default"]=r.exports},c925:function(e,t,n){"use strict";var o,a=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"b",function(){return a}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return o})},d551:function(e,t,n){},e303:function(e,t,n){"use strict";(function(e){n("fdae"),n("921b");o(n("66fd"));var t=o(n("401c"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])}},[["e303","common/runtime","common/vendor"]]]);