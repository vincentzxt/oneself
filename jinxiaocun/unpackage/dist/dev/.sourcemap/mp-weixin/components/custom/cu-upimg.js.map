{"version":3,"sources":["webpack:////Users/vincent/Documents/project/code/oneself/jinxiaocun/components/custom/cu-upimg.vue?d44d","webpack:////Users/vincent/Documents/project/code/oneself/jinxiaocun/components/custom/cu-upimg.vue?f5b0","webpack:////Users/vincent/Documents/project/code/oneself/jinxiaocun/components/custom/cu-upimg.vue?1d77","webpack:////Users/vincent/Documents/project/code/oneself/jinxiaocun/components/custom/cu-upimg.vue?181a","webpack:////Users/vincent/Documents/project/code/oneself/jinxiaocun/components/custom/cu-upimg.vue","webpack:////Users/vincent/Documents/project/code/oneself/jinxiaocun/components/custom/cu-upimg.vue?896e","webpack:////Users/vincent/Documents/project/code/oneself/jinxiaocun/components/custom/cu-upimg.vue?0718"],"names":["_self","data","upload_cache","upload_cache_list","upload_before_list","upload_img_size","upload_exceeded_list","upload_count","upload_max","upload_img_wh","url","name","props","upload_auto","type","Boolean","default","upimg_move","created","mounted","$nextTick","map","item","push","path","emit","methods","upImage","paths","promises","promisify","upload","extra","uni","showLoading","title","Promise","all","then","hideLoading","catch","res","console","log","chooseImage","count","length","sizeType","sourceType","success","len","tempFiles","i","Math","ceil","size","tempFilePaths","splice","showModal","content","Set","join","showCancel","confirmText","confirm","fail","err","warn","previewImage","idx","current","urls","removeImage","$emit","api","options","params","resolve","reject","Object","assign","progress","uploadTask","uploadFile","filePath","formData","JSON","parse","info","e","statusCode","onProgressUpdate"],"mappings":"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","file":"components/custom/cu-upimg.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./cu-upimg.vue?vue&type=template&id=605075bc&name=cu-upimg&\"\nvar renderjs\nimport script from \"./cu-upimg.vue?vue&type=script&lang=js&\"\nexport * from \"./cu-upimg.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cu-upimg.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('605075bc')) {\n      api.createRecord('605075bc', component.options)\n    } else {\n      api.reload('605075bc', component.options)\n    }\n    module.hot.accept(\"./cu-upimg.vue?vue&type=template&id=605075bc&name=cu-upimg&\", function () {\n      api.rerender('605075bc', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/vincent/Documents/project/code/oneself/jinxiaocun/components/custom/cu-upimg.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cu-upimg.vue?vue&type=template&id=605075bc&name=cu-upimg&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cu-upimg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cu-upimg.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nvar _self;\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\t// 选择图片tempFile\n\t\t\tupload_cache: [],\n\t\t\t// 预览数组->支持从服务器拉取\n\t\t\tupload_cache_list: [],\n\t\t\t// 上传数组\n\t\t\tupload_before_list: [],\n\t\t\t// 图片大小\n\t\t\tupload_img_size: [],\n\t\t\t// 超出限制数组\n\t\t\tupload_exceeded_list: [],\n\t\t\t// 上传数量\n\t\t\tupload_count: 2,\n\t\t\t// 最大上传容量(M)\n\t\t\tupload_max: 1,\n\t\t\t// 图片/选择宽高\n\t\t\tupload_img_wh: 162,\n\t\t\t// 测试接口(建议七牛、阿里云、腾讯云都采用后端对接，直接调用后端上传)\n\t\t\turl: 'https://a3.dns06.net.cn/app/index.php?i=2&c=entry&a=wxapp&do=Upload_qiniu_b&m=jzwx_a'\n\t\t}\n\t},\n\tname: 'cu-upimg',\n\tprops: {\n\t\tupload_auto: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tupimg_move: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tcreated() {\n\t\t_self = this;\n\t},\n\tmounted() {\n\t\t_self.$nextTick(function() {\n\t\t\t_self.upload_before_list.map(function(item) {\n\t\t\t\t_self.upload_cache_list.push(item.path);\n\t\t\t});\n\t\t\t// _self.upimg_move = true;\n\t\t\t_self.emit();\n\t\t})\n\t},\n\tmethods: {\n\t\tupImage(paths) {\n\t\t\tconst promises = paths.map((path) => {\n\t\t\t\treturn promisify(upload)({\n\t\t\t\t\turl: _self.url,\n\t\t\t\t\tpath: path,\n\t\t\t\t\tname: 'file',\n\t\t\t\t\textra: {},\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: `正在上传...`,\n\t\t\t});\n\n\t\t\tPromise.all(promises).then((data) => {\n\t\t\t\tuni.hideLoading();\n\t\t\t\t_self.upload_cache_list.push(...data);\n\t\t\t\t_self.emit();\n\t\t\t}).catch((res) => {\n\t\t\t\tconsole.log(res);\n\t\t\t\tuni.hideLoading();\n\t\t\t});\n\t\t},\n\t\tchooseImage() {\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: _self.upload_count - _self.upload_before_list.length,\n\t\t\t\tsizeType: ['compressed', 'original'],\n\t\t\t\tsourceType: ['album', 'camera'],\n\t\t\t\tsuccess: async (res) => {\n\t\t\t\t\tfor (let i = 0, len = res.tempFiles.length; i < len; i++) {\n\t\t\t\t\t\tres.tempFiles[i]['upload_percent'] = 0;\n\t\t\t\t\t\tif (Math.ceil(res.tempFiles[i].size / 1024) < _self.upload_max * 1024) {\n\t\t\t\t\t\t\tawait _self.upload_img_size.push(Math.ceil(res.tempFiles[i].size / 1024));\n\t\t\t\t\t\t\tawait _self.upload_before_list.push(res.tempFiles[i]);\n\t\t\t\t\t\t\t// TODO v3.1增加图片格式限制\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tres.tempFilePaths.splice(i, 1);\n\t\t\t\t\t\t\t_self.upload_exceeded_list.push(i === 0 ? 1 : i + 1);\n\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\t\tcontent: `第${[...new Set(_self.upload_exceeded_list)].join(',')}张图片超出限制${_self.upload_max}M,已过滤`,\n\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\tconfirmText: '确认',\n\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t_self.upload_img_size.splice(i--, 1);\n\t\t\t\t\t\t\t\t\t\t_self.upload_exceeded_list.splice(i--, 1);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t_self.upload_cache = await res.tempFilePaths;\n\t\t\t\t\t_self.upload(_self.upload_auto);\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tasync upload(upload_auto) {\n\t\t\tupload_auto ? await _self.upImage(_self.upload_cache) : console.warn(\n\t\t\t\t`传输参数:this.$refs.xx.upload(true)才可上传,默认false`);\n\t\t},\n\t\tpreviewImage(idx) {\n\t\t\tuni.previewImage({\n\t\t\t\tcurrent: idx,\n\t\t\t\turls: _self.upload_cache_list\n\t\t\t});\n\t\t},\n\t\tremoveImage(idx) {\n\t\t\t_self.upload_before_list.splice(idx, 1);\n\t\t\t_self.upload_cache_list.splice(idx, 1);\n\t\t\t_self.emit();\n\t\t},\n\t\temit() {\n\t\t\t_self.$emit('change', _self.upload_cache_list);\n\t\t}\n\t}\n}\n\n\nconst promisify = (api) => {\n\treturn (options, ...params) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tapi(Object.assign({}, options, {\n\t\t\t\tsuccess: resolve,\n\t\t\t\tfail: reject\n\t\t\t}), ...params);\n\t\t});\n\t}\n}\n\nconst upload = options => {\n\tvar url = options.url,\n\t\tpath = options.path,\n\t\tname = options.name,\n\t\t// data = options.data,\n\t\textra = options.extra,\n\t\tsuccess = options.success,\n\t\tprogress = options.progress,\n\t\tfail = options.fail\n\n\tconst uploadTask = uni.uploadFile({\n\t\turl: url,\n\t\tfilePath: path,\n\t\tname: name,\n\t\tformData: extra,\n\t\tsuccess: function(res) {\n\t\t\tvar data = res.data\n\t\t\ttry {\n\t\t\t\t//Tip : 切记->主要修改这里图片的返回值为真实返回路径!!! 详情见示例\n\t\t\t\tdata = JSON.parse(res.data).info\n\t\t\t} catch (e) {\n\t\t\t\tthrow (e)\n\t\t\t}\n\t\t\t// 根据自己的返回数据做相应判断,服务器返回200即代表成功请求\n\t\t\tif (res.statusCode == 200) {\n\t\t\t\tif (success) {\n\t\t\t\t\tsuccess(data)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (fail) {\n\t\t\t\t\tfail(data)\n\t\t\t\t}\n\t\t\t}\n\n\t\t},\n\t\tfail: function(res) {\n\t\t\tconsole.log(res)\n\t\t\tif (fail) {\n\t\t\t\tfail(res)\n\t\t\t}\n\t\t}\n\t})\n\tuploadTask.onProgressUpdate(async (res) => {\n\t\tfor (let i = 0, len = _self.upload_before_list.length; i < len; i++) {\n\t\t\t_self.upload_before_list[i]['upload_percent'] = await res.progress;\n\t\t}\n\t\t_self.upload_before_list = _self.upload_before_list;\n\t});\n}\n","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cu-upimg.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cu-upimg.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}