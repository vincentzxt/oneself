{"version":3,"sources":["webpack:////Users/vincent/Documents/project/code/oneself/jinxiaocun/components/ksp-image-cutter/ksp-image-cutter.vue?1341","webpack:////Users/vincent/Documents/project/code/oneself/jinxiaocun/components/ksp-image-cutter/ksp-image-cutter.vue?7c27","webpack:////Users/vincent/Documents/project/code/oneself/jinxiaocun/components/ksp-image-cutter/ksp-image-cutter.vue?a675","webpack:////Users/vincent/Documents/project/code/oneself/jinxiaocun/components/ksp-image-cutter/ksp-image-cutter.vue?609d","webpack:////Users/vincent/Documents/project/code/oneself/jinxiaocun/components/ksp-image-cutter/ksp-image-cutter.vue","webpack:////Users/vincent/Documents/project/code/oneself/jinxiaocun/components/ksp-image-cutter/ksp-image-cutter.vue?ad12"],"names":["__webpack_require__","r","__webpack_exports__","_ksp_image_cutter_vue_vue_type_template_id_5ee59174_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_ksp_image_cutter_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","key","d","_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","Object","renderjs","options","__file","_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_ksp_image_cutter_vue_vue_type_template_id_5ee59174_scoped_true___WEBPACK_IMPORTED_MODULE_0__","render","staticRenderFns","recyclableRender","_h","this","$createElement","_self","_c","_withStripped","_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_ksp_image_cutter_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_ksp_image_cutter_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default","n","props","url","type","String","default","fixed","Boolean","width","Number","height","maxWidth","maxHeight","blob","data","mask","show","frame","left","top","image","real","target","touches","start","timeoutId","context","mounted","uni","createCanvasContext","targetContext","methods","imageLoad","ev","_this","detail","createSelectorQuery","in","select","boundingClientRect","bw","bh","fw","fh","tw","th","sx","sy","scale","tx","ty","iw","ih","setTimeout","trimImage","exec","touchHandle","touchStart","stopTime","length","changedTouches","i","touch","push","touchMove","preventDefault","moveImage","scaleFrame","ta","tb","tc","td","identifier","temp","scaleImage","touchEnd","startTime","touchCancel","_this2","clearTimeout","_this3","ax","ay","x","y","drawImage","draw","clientX","clientY","x1","y1","x2","y2","x3","y3","x4","y4","ol","Math","sqrt","ocx","ocy","parseBlob","base64","arr","split","mime","match","bstr","atob","u8arr","Uint8Array","charCodeAt","URL","webkitURL","createObjectURL","Blob","onok","_this4","sc","showLoading","title","canvasToTempFilePath","canvasId","success","res","path","tempFilePath","$emit","fail","console","log","complete","hideLoading","oncancle","_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_ksp_image_cutter_vue_vue_type_style_index_0_id_5ee59174_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_ksp_image_cutter_vue_vue_type_style_index_0_id_5ee59174_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"components/ksp-image-cutter/ksp-image-cutter.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./ksp-image-cutter.vue?vue&type=template&id=5ee59174&scoped=true&\"\nvar renderjs\nimport script from \"./ksp-image-cutter.vue?vue&type=script&lang=js&\"\nexport * from \"./ksp-image-cutter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ksp-image-cutter.vue?vue&type=style&index=0&id=5ee59174&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5ee59174\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('5ee59174')) {\n      api.createRecord('5ee59174', component.options)\n    } else {\n      api.reload('5ee59174', component.options)\n    }\n    module.hot.accept(\"./ksp-image-cutter.vue?vue&type=template&id=5ee59174&scoped=true&\", function () {\n      api.rerender('5ee59174', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/vincent/Documents/project/code/oneself/jinxiaocun/components/ksp-image-cutter/ksp-image-cutter.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ksp-image-cutter.vue?vue&type=template&id=5ee59174&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ksp-image-cutter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ksp-image-cutter.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tprops: {\n\t\turl: {\n\t\t\ttype: String,\n\t\t\tdefault: \"\"\n\t\t},\n\t\tfixed: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\twidth: {\n\t\t\ttype: Number,\n\t\t\tdefault: 200\n\t\t},\n\t\theight: {\n\t\t\ttype: Number,\n\t\t\tdefault: 200\n\t\t},\n\t\tmaxWidth: {\n\t\t\ttype: Number,\n\t\t\tdefault: 1024\n\t\t},\n\t\tmaxHeight: {\n\t\t\ttype: Number,\n\t\t\tdefault: 1024\n\t\t},\n\t\tblob: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmask: {\n\t\t\t\tshow: false\n\t\t\t},\n\t\t\tframe: {\n\t\t\t\tleft: 50,\n\t\t\t\ttop: 50,\n\t\t\t\twidth: this.width,\n\t\t\t\theight: this.height\n\t\t\t},\n\t\t\timage: {\n\t\t\t\tleft: 20,\n\t\t\t\ttop: 20,\n\t\t\t\twidth: 300,\n\t\t\t\theight: 400\n\t\t\t},\n\t\t\treal: {\n\t\t\t\twidth: 100,\n\t\t\t\theight: 100\n\t\t\t},\n\t\t\ttarget: {\n\t\t\t\twidth: this.width,\n\t\t\t\theight: this.height\n\t\t\t},\n\t\t\ttouches: [],\n\t\t\ttype: \"\",\n\t\t\tstart: {\n\t\t\t\tframe: {\n\t\t\t\t\tleft: 0,\n\t\t\t\t\ttop: 0,\n\t\t\t\t\twidth: 0,\n\t\t\t\t\theight: 0\n\t\t\t\t},\n\t\t\t\timage: {\n\t\t\t\t\tleft: 0,\n\t\t\t\t\ttop: 0,\n\t\t\t\t\twidth: 0,\n\t\t\t\t\theight: 0\n\t\t\t\t},\n\t\t\t},\n\t\t\ttimeoutId: -1,\n\t\t\tcontext: null\n\t\t};\n\t},\n\tmounted() {\n\n\n\n\n\n\t\tthis.context = uni.createCanvasContext(\"canvas\", this);\n\t\tthis.targetContext = uni.createCanvasContext(\"target\", this);\n\t},\n\tmethods: {\n\t\timageLoad(ev) {\n\t\t\tthis.mask.show = true;\n\t\t\tthis.real.width = ev.detail.width;\n\t\t\tthis.real.height = ev.detail.height;\n\t\t\tthis.image.width = ev.detail.width;\n\t\t\tthis.image.height = ev.detail.height;\n\t\t\tthis.frame.width = this.width;\n\t\t\tthis.frame.height = this.height;\n\t\t\tif (!this.fixed) {\n\t\t\t\tthis.frame.width = this.image.width;\n\t\t\t\tthis.frame.height = this.image.height;\n\t\t\t}\n\t\t\tvar query = uni.createSelectorQuery().in(this);\n\t\t\tquery.select(\".body\").boundingClientRect((data) => {\n\t\t\t\tvar bw = data.width;\n\t\t\t\tvar bh = data.height;\n\t\t\t\tvar fw = this.frame.width;\n\t\t\t\tvar fh = this.frame.height;\n\t\t\t\tvar tw = bw * 0.8;\n\t\t\t\tvar th = bh * 0.8;\n\t\t\t\tvar sx = tw / fw;\n\t\t\t\tvar sy = th / fh;\n\t\t\t\tvar scale = sx;\n\t\t\t\tif (sx < sy) {\n\t\t\t\t\tscale = sy;\n\t\t\t\t}\n\t\t\t\ttw = fw * scale;\n\t\t\t\tth = fh * scale;\n\t\t\t\tvar tx = (bw - tw) / 2;\n\t\t\t\tvar ty = (bh - th) / 2;\n\t\t\t\tthis.frame.width = tw;\n\t\t\t\tthis.frame.height = th;\n\t\t\t\tthis.frame.left = tx;\n\t\t\t\tthis.frame.top = ty;\n\t\t\t\t\n\t\t\t\tvar iw = this.image.width;\n\t\t\t\tvar ih = this.image.height;\n\t\t\t\tsx = tw / iw;\n\t\t\t\tsy = th / ih;\n\t\t\t\tscale = sx;\n\t\t\t\tif (sx < sy) {\n\t\t\t\t\tscale = sy;\n\t\t\t\t}\n\t\t\t\tthis.image.width = iw * scale;\n\t\t\t\tthis.image.height = ih * scale;\n\t\t\t\tthis.image.left = (bw - this.image.width) / 2;\n\t\t\t\tthis.image.top = (bh - this.image.height) / 2;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.trimImage();\n\t\t\t\t}, 100);\n\t\t\t}).exec();\n\t\t},\n\t\ttouchHandle() {},\n\t\ttouchStart(ev, type) {\n\t\t\tthis.stopTime();\n\t\t\tthis.mask.show = false;\n\t\t\tif (this.touches.length == 0) {\n\t\t\t\tthis.type = type;\n\t\t\t\tthis.start.frame.left = this.frame.left;\n\t\t\t\tthis.start.frame.top = this.frame.top;\n\t\t\t\tthis.start.frame.width = this.frame.width;\n\t\t\t\tthis.start.frame.height = this.frame.height;\n\t\t\t\tthis.start.image.left = this.image.left;\n\t\t\t\tthis.start.image.top = this.image.top;\n\t\t\t\tthis.start.image.width = this.image.width;\n\t\t\t\tthis.start.image.height = this.image.height;\n\t\t\t}\n\t\t\tvar touches = ev.changedTouches;\n\t\t\tfor(var i = 0; i < touches.length; i++) {\n\t\t\t\tvar touch = touches[i];\n\t\t\t\t// this.touches[touch.identifier] = touch;\n\t\t\t\tthis.touches.push(touch);\n\t\t\t}\n\t\t},\n\t\ttouchMove(ev) {\n\t\t\tthis.stopTime();\n\t\t\tev.preventDefault();\n\t\t\tvar touches = ev.touches;\n\t\t\tif (this.touches.length == 1) {\n\t\t\t\tif (this.type == \"plank\" || this.type == \"frame\" || this.fixed) {\n\t\t\t\t\tthis.moveImage(this.touches[0], touches[0]);\n\t\t\t\t} else {\n\t\t\t\t\tthis.scaleFrame(this.touches[0], touches[0], this.type);\n\t\t\t\t}\n\t\t\t} else if (this.touches.length == 2 && touches.length == 2) {\n\t\t\t\tvar ta = this.touches[0];\n\t\t\t\tvar tb = this.touches[1];\n\t\t\t\tvar tc = touches[0];\n\t\t\t\tvar td = touches[1];\n\t\t\t\tif (ta.identifier != tc.identifier) {\n\t\t\t\t\tvar temp = tc;\n\t\t\t\t\ttc = td;\n\t\t\t\t\ttd = temp;\n\t\t\t\t}\n\t\t\t\tthis.scaleImage(ta, tb, tc, td);\n\t\t\t}\n\t\t},\n\t\ttouchEnd(ev) {\n\t\t\tthis.type = \"\";\n\t\t\tthis.touches = [];\n\t\t\tthis.startTime();\n\t\t},\n\t\ttouchCancel(ev) {\n\t\t\tthis.type = \"\";\n\t\t\tthis.touches = [];\n\t\t\tthis.startTime();\n\t\t},\n\t\tstartTime() {\n\t\t\tthis.stopTime();\n\t\t\tthis.timeoutId = setTimeout(() => {\n\t\t\t\tthis.trimImage();\n\t\t\t}, 800);\n\t\t},\n\t\tstopTime() {\n\t\t\tif (this.timeoutId >= 0) {\n\t\t\t\tclearTimeout(this.timeoutId);\n\t\t\t\tthis.timeoutId = -1;\n\t\t\t}\n\t\t},\n\t\ttrimImage() {\n\t\t\tthis.mask.show = true;\n\t\t\tvar query = uni.createSelectorQuery().in(this);\n\t\t\tquery.select(\".body\").boundingClientRect((data) => {\n\t\t\t\tvar bw = data.width;\n\t\t\t\tvar bh = data.height;\n\t\t\t\tvar fw = this.frame.width;\n\t\t\t\tvar fh = this.frame.height;\n\t\t\t\tvar tw = bw * 0.8;\n\t\t\t\tvar th = bh * 0.8;\n\t\t\t\tvar sx = tw / fw;\n\t\t\t\tvar sy = th / fh;\n\t\t\t\tvar scale = sx;\n\t\t\t\tif (sx > sy) {\n\t\t\t\t\tscale = sy;\n\t\t\t\t}\n\t\t\t\ttw = fw * scale;\n\t\t\t\tth = fh * scale;\n\t\t\t\tvar tx = (bw - tw) / 2;\n\t\t\t\tvar ty = (bh - th) / 2;\n\t\t\t\tvar ax = tx - this.frame.left + (this.frame.left - this.image.left) * (1 - scale);\n\t\t\t\tvar ay = ty - this.frame.top + (this.frame.top - this.image.top) * (1 - scale);\n\t\t\t\tthis.frame.width = tw;\n\t\t\t\tthis.frame.height = th;\n\t\t\t\tthis.frame.left = tx;\n\t\t\t\tthis.frame.top = ty;\n\t\t\t\tthis.image.width *= scale;\n\t\t\t\tthis.image.height *= scale;\n\t\t\t\tthis.image.left += ax;\n\t\t\t\tthis.image.top += ay;\n\t\t\t}).exec();\n\t\t\tsetTimeout(() => {\n\t\t\t\tvar scale = this.image.width / this.real.width;\n\t\t\t\tvar x = (this.frame.left - this.image.left) / scale;\n\t\t\t\tvar y = (this.frame.top - this.image.top) / scale;\n\t\t\t\tvar width = this.frame.width / scale;\n\t\t\t\tvar height = this.frame.height / scale;\n\t\t\t\tthis.context.drawImage(this.url, x, y, width, height, 0, 0, this.frame.width, this.frame.height);\n\t\t\t\tthis.context.draw(false);\n\t\t\t}, 100);\n\t\t},\n\t\tmoveImage(ta, tb) {\n\t\t\tvar ax = tb.clientX - ta.clientX;\n\t\t\tvar ay = tb.clientY - ta.clientY;\n\t\t\tthis.image.left = this.start.image.left + ax;\n\t\t\tthis.image.top = this.start.image.top + ay;\n\t\t\tif (this.image.left > this.frame.left) {\n\t\t\t\tthis.image.left = this.frame.left;\n\t\t\t}\n\t\t\tif (this.image.top > this.frame.top) {\n\t\t\t\tthis.image.top = this.frame.top;\n\t\t\t}\n\t\t\tif (this.image.left + this.image.width < this.frame.left + this.frame.width) {\n\t\t\t\tthis.image.left = this.frame.left + this.frame.width - this.image.width; \n\t\t\t}\n\t\t\tif (this.image.top + this.image.height < this.frame.top + this.frame.height) {\n\t\t\t\tthis.image.top = this.frame.top + this.frame.height - this.image.height; \n\t\t\t}\n\t\t},\n\t\tscaleImage(ta, tb, tc, td) {\n\t\t\tvar x1 = ta.clientX;\n\t\t\tvar y1 = ta.clientY;\n\t\t\tvar x2 = tb.clientX;\n\t\t\tvar y2 = tb.clientY;\n\t\t\tvar x3 = tc.clientX;\n\t\t\tvar y3 = tc.clientY;\n\t\t\tvar x4 = td.clientX;\n\t\t\tvar y4 = td.clientY;\n\t\t\tvar ol = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n\t\t\tvar el = Math.sqrt((x3 - x4) * (x3 - x4) + (y3 - y4) * (y3 - y4));\n\t\t\tvar ocx = (x1 + x2) / 2;\n\t\t\tvar ocy = (y1 + y2) / 2;\n\t\t\tvar ecx = (x3 + x4) / 2;\n\t\t\tvar ecy = (y3 + y4) / 2;\n\t\t\tvar ax = ecx - ocx;\n\t\t\tvar ay = ecy - ocy;\n\t\t\tvar scale = el / ol;\n\t\t\tif (this.start.image.width * scale < this.frame.width) {\n\t\t\t\tscale = this.frame.width / this.start.image.width;\n\t\t\t}\n\t\t\tif (this.start.image.height * scale < this.frame.height) {\n\t\t\t\tscale = this.frame.height / this.start.image.height;\n\t\t\t}\n\t\t\tif (this.start.image.width * scale < this.frame.width) {\n\t\t\t\tscale = this.frame.width / this.start.image.width;\n\t\t\t}\n\t\t\tthis.image.left = this.start.image.left + ax - (ocx - this.start.image.left) * (scale - 1);\n\t\t\tthis.image.top = this.start.image.top + ay - (ocy - this.start.image.top) * (scale - 1);\n\t\t\tthis.image.width = this.start.image.width * scale;\n\t\t\tthis.image.height = this.start.image.height * scale;\n\t\t\tif (this.image.left > this.frame.left) {\n\t\t\t\tthis.image.left = this.frame.left;\n\t\t\t}\n\t\t\tif (this.image.top > this.frame.top) {\n\t\t\t\tthis.image.top = this.frame.top;\n\t\t\t}\n\t\t\tif (this.image.left + this.image.width < this.frame.left + this.frame.width) {\n\t\t\t\tthis.image.left = this.frame.left + this.frame.width - this.image.width; \n\t\t\t}\n\t\t\tif (this.image.top + this.image.height < this.frame.top + this.frame.height) {\n\t\t\t\tthis.image.top = this.frame.top + this.frame.height - this.image.height; \n\t\t\t}\n\t\t\t\n\t\t},\n\t\tscaleFrame(ta, tb, type) {\n\t\t\tvar ax = tb.clientX - ta.clientX;\n\t\t\tvar ay = tb.clientY - ta.clientY;\n\t\t\tvar x1 = this.start.frame.left;\n\t\t\tvar y1 = this.start.frame.top;\n\t\t\tvar x2 = this.start.frame.left + this.start.frame.width;\n\t\t\tvar y2 = this.start.frame.top + this.start.frame.height;\n\t\t\tif (type == \"left\") {\n\t\t\t\tx1 += ax;\n\t\t\t} else if (type == \"right\") {\n\t\t\t\tx2 += ax;\n\t\t\t} else if (type == \"top\") {\n\t\t\t\ty1 += ay;\n\t\t\t} else if (type == \"bottom\") {\n\t\t\t\ty2 += ay;\n\t\t\t} else if (type == \"left-top\") {\n\t\t\t\tx1 += ax;\n\t\t\t\ty1 += ay;\n\t\t\t} else if (type == \"left-bottom\") {\n\t\t\t\tx1 += ax;\n\t\t\t\ty2 += ay;\n\t\t\t} else if (type == \"right-top\") {\n\t\t\t\tx2 += ax;\n\t\t\t\ty1 += ay;\n\t\t\t} else if (type == \"right-bottom\") {\n\t\t\t\tx2 += ax;\n\t\t\t\ty2 += ay;\n\t\t\t}\n\t\t\tif (x1 < this.image.left) {\n\t\t\t\tx1 = this.image.left;\n\t\t\t}\n\t\t\tif (y1 < this.image.top) {\n\t\t\t\ty1 = this.image.top;\n\t\t\t}\n\t\t\tif (x2 > this.image.left + this.image.width) {\n\t\t\t\tx2 = this.image.left + this.image.width;\n\t\t\t}\n\t\t\tif (y2 > this.image.top + this.image.height) {\n\t\t\t\ty2 = this.image.top + this.image.height;\n\t\t\t}\n\t\t\tthis.frame.left = x1;\n\t\t\tthis.frame.top = y1;\n\t\t\tthis.frame.width = x2 - x1;\n\t\t\tthis.frame.height = y2 - y1;\n\t\t},\n\t\tparseBlob(base64) {\n\t\t\tvar arr = base64.split(',');\n\t\t\tvar mime = arr[0].match(/:(.*?);/)[1];\n\t\t\tvar bstr = atob(arr[1]);\n\t\t\tvar n = bstr.length;\n\t\t\tvar u8arr = new Uint8Array(n);\n\t\t\tfor(var i = 0; i < n; i++) {\n\t\t\t\tu8arr[i] = bstr.charCodeAt(i);\n\t\t\t}\n\t\t\tvar url = URL || webkitURL;\n\t\t\treturn url.createObjectURL(new Blob([u8arr], {type: mime}));\n\t\t},\n\t\tonok() {\n\t\t\tvar scale = this.image.width / this.real.width;\n\t\t\tvar x = (this.frame.left - this.image.left) / scale;\n\t\t\tvar y = (this.frame.top - this.image.top) / scale;\n\t\t\tvar width = this.frame.width / scale;\n\t\t\tvar height = this.frame.height / scale;\n\t\t\tvar tw = width;\n\t\t\tvar th = height;\n\t\t\tif (this.fixed) {\n\t\t\t\ttw = this.width / 2;\n\t\t\t\tth = this.height / 2;\n\t\t\t} else {\n\t\t\t\tif (tw > this.maxWidth / 2) {\n\t\t\t\t\tvar sc = this.maxWidth / 2 / tw;\n\t\t\t\t\ttw = tw * sc;\n\t\t\t\t\tth = th * sc;\n\t\t\t\t}\n\t\t\t\tif (th > this.maxHeight / 2) {\n\t\t\t\t\tvar sc = this.maxHeight / 2 / th;\n\t\t\t\t\tth = th * sc;\n\t\t\t\t\ttw = tw * sc;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.target.width = tw;\n\t\t\tthis.target.height = th;\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: \"正在裁剪\"\n\t\t\t});\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.targetContext.drawImage(this.url, x, y, width, height, 0, 0, tw, th);\n\t\t\t\tthis.targetContext.draw(false, () => {\n\t\t\t\t\tuni.canvasToTempFilePath({\n\t\t\t\t\t\tcanvasId: \"target\",\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tvar path = res.tempFilePath;\n\n\n\n\n\n\t\t\t\t\t\t\tthis.$emit(\"ok\", {\n\t\t\t\t\t\t\t\tpath: path\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: (ev) => {\n\t\t\t\t\t\t\tconsole.log(ev);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this);\n\t\t\t\t});\n\t\t\t}, 100);\n\t\t},\n\t\toncancle() {\n\t\t\tthis.$emit(\"cancel\");\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ksp-image-cutter.vue?vue&type=style&index=0&id=5ee59174&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ksp-image-cutter.vue?vue&type=style&index=0&id=5ee59174&scoped=true&lang=css&\""],"sourceRoot":""}