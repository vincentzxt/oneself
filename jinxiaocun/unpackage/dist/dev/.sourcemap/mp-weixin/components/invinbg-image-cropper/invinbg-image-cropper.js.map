{"version":3,"sources":["webpack:////Users/vincent/Documents/project/code/oneself/jinxiaocun/components/invinbg-image-cropper/invinbg-image-cropper.vue?2db8","webpack:////Users/vincent/Documents/project/code/oneself/jinxiaocun/components/invinbg-image-cropper/invinbg-image-cropper.vue?b0d3","webpack:////Users/vincent/Documents/project/code/oneself/jinxiaocun/components/invinbg-image-cropper/invinbg-image-cropper.vue?9721","webpack:////Users/vincent/Documents/project/code/oneself/jinxiaocun/components/invinbg-image-cropper/invinbg-image-cropper.vue?b6a0","webpack:////Users/vincent/Documents/project/code/oneself/jinxiaocun/components/invinbg-image-cropper/invinbg-image-cropper.vue","webpack:////Users/vincent/Documents/project/code/oneself/jinxiaocun/components/invinbg-image-cropper/invinbg-image-cropper.vue?71aa"],"names":["__webpack_require__","r","__webpack_exports__","_invinbg_image_cropper_vue_vue_type_template_id_4c9dca4c_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_invinbg_image_cropper_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","key","d","_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","Object","renderjs","options","__file","_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_invinbg_image_cropper_vue_vue_type_template_id_4c9dca4c_scoped_true___WEBPACK_IMPORTED_MODULE_0__","render","staticRenderFns","recyclableRender","_h","this","$createElement","_self","_c","_withStripped","_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_invinbg_image_cropper_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_invinbg_image_cropper_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default","n","name","props","cropWidth","type","Number","default","cropHeight","cropFixed","Boolean","src","String","showResetBtn","showRotateBtn","data","sysInfo","uni","getSystemInfoSync","show","scale","rotate","cropW","cropH","cropOldW","cropOldH","pixelRatio","imageRealWidth","imageRealHeight","cropOffsertX","cropOffsertY","startX","startY","border","x","y","startL","oldScale","watch","val","length","init","computed","containerTop","containerHeight","windowHeight","windowWidth","imageRatio","imageWidth","imageHeight","methods","rotateHandler","showLoading","title","loadImage","then","e","hideLoading","catch","showModal","content","_this","Promise","resolve","reject","getImageInfo","success","res","width","height","$nextTick","fail","cancel","$emit","confirm","event","ctx","createCanvasContext","imgage","imgW","imgH","dx","dy","setFillStyle","fillRect","save","Math","PI","drawImage","restore","draw","canvasToTempFilePath","canvasId","destWidth","destHeight","detail","tempFilePath","imgTouchStart","touches","scaling","pageX","pageY","hypotenuse","sqrt","pow","max","imgMoveing","cha","coe","num","abs","moveX","moveY","imgMoveEnd","_this2","setTimeout","touchStart","cropMoveing","_cropX","_cropY","dragMove","_cropMoveLeft","_cropMoveTop","_cropMoveRight","_cropMoveBottom","topY","leftX","_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_invinbg_image_cropper_vue_vue_type_style_index_0_id_4c9dca4c_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_invinbg_image_cropper_vue_vue_type_style_index_0_id_4c9dca4c_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":";;;;2DAAAA,EAAAC,EAAAC,GAAA,IAAAC,EAAAH,+EAAA,KAAAI,EAAAJ,6DAAA,aAAAK,KAAAD,EAAA,YAAAC,GAAA,SAAAC,GAAAN,EAAAO,EAAAL,EAAAI,EAAA,kBAAAF,EAAAE,KAAA,CAAAD,GAAAL,6FAAA,SAAAQ,EAAAR,qMAAA,IASAS,EAAgBC,OAAAF,EAAA,QAAAE,CACdN,EAAA,QACAD,EAAA,OACAA,EAAA,iBACF,EACA,KACA,WACA,MACA,EACEA,EAAA,gBAjBFQ,GAwCAF,EAAAG,QAAAC,OAAA,qHACeX,EAAA,QAAAO;;;;2GC1CfT,EAAAC,EAAAC,GAAA,IAAAY,EAAAd,qmCAAA,KAAAA,EAAAO,EAAAL,EAAA,2BAAAY,EAAA,SAAAd,EAAAO,EAAAL,EAAA,oCAAAY,EAAA,kBAAAd,EAAAO,EAAAL,EAAA,qCAAAY,EAAA,mBAAAd,EAAAO,EAAAL,EAAA,+BAAAY,EAAA;;;;2GCAAd,EAAAC,EAAAC,GAAAF,EAAAO,EAAAL,EAAA,2BAAAa,IAAAf,EAAAO,EAAAL,EAAA,oCAAAc,IAAAhB,EAAAO,EAAAL,EAAA,qCAAAe,IAAAjB,EAAAO,EAAAL,EAAA,2BACA,IAAAa,EAAA,WACA,IACAG,EADAC,KACAC,eADAD,KAEAE,MAAAC,IAEAL,GAAA,EACAD,EAAA,GACAD,EAAAQ,eAAA;;;;2DCRAvB,EAAAC,EAAAC,GAAA,IAAAsB,EAAAxB,40BAAA,KAAAyB,EAAAzB,EAAA0B,EAAAF,GAAA,QAAAnB,KAAAmB,EAAA,YAAAnB,GAAA,SAAAC,GAAAN,EAAAO,EAAAL,EAAAI,EAAA,kBAAAkB,EAAAlB,KAAA,CAAAD,GAAi4BH,EAAA,QAAAuB,EAAG;;;;gJCmDr3B,CACXE,KAAM,gBACNC,MAAO,CACHC,UAAW,CACPC,KAAMC,OACNC,QAAS,KAEbC,WAAY,CACRH,KAAMC,OACNC,QAAS,KAEbE,UAAW,CACPJ,KAAMK,QACNH,SAAS,GAEbI,IAAK,CACDN,KAAMO,QAEVC,aAAc,CACVR,KAAMK,QACNH,SAAS,GAEbO,cAAe,CACXT,KAAMK,QACNH,SAAS,IAGjBQ,KA3BW,WA4BP,IAAMC,EAAUC,EAAIC,oBAEpB,MAAO,CACHC,MAAM,EACNC,MAAO,EACPC,OAAQ,EACRC,MAAO,EACPC,MAAO,EACPC,SAAU,EACVC,SAAU,EACVT,QAASA,EACTU,WAVeV,EAAQU,WAWvBC,eAAgB,EAChBC,gBAAiB,EACjBC,aAAc,EACdC,aAAc,EACdC,OAAQ,EACRC,OAAQ,EAERC,OAAQ,EACRC,EAAG,EACHC,EAAG,EACHC,OAAQ,EACRC,SAAU,IAGlBC,MAAO,CACH3B,IADG,SACC4B,GACGA,EAAIC,OAAS,GACZ9C,KAAK+C,QAGbtB,KANG,SAMEoB,GACGA,IACA7C,KAAKiB,IAAM,MAIvB+B,SAAU,CACNC,aADM,WAMF,OAJU,GAOdC,gBATM,WAUF,OAAOlD,KAAKmD,aAAe,IAG/BC,YAbM,WAcF,OAAOpD,KAAKsB,QAAQ8B,aAExBD,aAhBM,WAiBF,OAAOnD,KAAKsB,QAAQ6B,cAGxBE,WApBM,WAqBF,OAAIrD,KAAKkC,gBAAkB,EAChBlC,KAAKiC,eAAiBjC,KAAKkC,gBAE/B,GAGXoB,WA3BM,WA4BF,OAAItD,KAAKqD,YAAc,EACZrD,KAAKoD,YAETpD,KAAKoD,YAAcpD,KAAKqD,YAGnCE,YAlCM,WAmCF,OAAIvD,KAAKqD,YAAc,EACZrD,KAAKoD,YAAcpD,KAAKqD,WAE5BrD,KAAKoD,cAGpBI,QAAS,CACLC,cADK,WAEiB,GAAfzD,KAAK2B,OACJ3B,KAAK2B,OAAS,IAEZ3B,KAAK2B,QAGfoB,KARK,WASD/C,KAAK2B,OAAS,EACd3B,KAAK0B,MAAQ,EACb1B,KAAK4B,MAAQ5B,KAAKU,UAClBV,KAAK6B,MAAQ7B,KAAKc,WAClBS,EAAImC,YAAY,CACZC,MAAO,aAEX3D,KAAK4D,UAAU5D,KAAKiB,KAAK4C,KAAK,SAACC,GAC3BvC,EAAIwC,gBACLC,MAAM,SAACF,GACNvC,EAAIwC,cACJxC,EAAI0C,UAAU,CACVN,MAAO,KACPO,QAAS,cAIrBN,UA1BK,SA0BK3C,GACN,IAAMkD,EAAQnE,KACd,OAAO,IAAIoE,QAAQ,SAACC,EAASC,GACzB/C,EAAIgD,aAAa,CACbtD,IAAKA,EACLuD,QAAS,SAACC,GACNN,EAAMlC,eAAiBwC,EAAIC,MAC3BP,EAAMjC,gBAAkBuC,EAAIE,OAE5BR,EAAMhC,aAAegC,EAAMf,YAAc,EAAIe,EAAMvC,MAAQ,EAC3DuC,EAAM/B,aAAe+B,EAAMhB,aAAe,EAAIgB,EAAMtC,MAAQ,EAC5DsC,EAAM1C,MAAO,EAEb0C,EAAMS,UAAU,WACZT,EAAM3B,EAAI2B,EAAMf,YAAc,EAAIe,EAAMb,WAAa,EACrDa,EAAM1B,EAAI0B,EAAMjB,gBAAkB,EAAIiB,EAAMZ,YAAc,IAE9Dc,EAAQI,IAEZI,KAAM,SAACf,GACHK,EAAM1C,MAAO,EACb6C,EAAOR,SAMvBgB,OArDK,WAsDD9E,KAAKyB,MAAO,EACZzB,KAAK+E,MAAM,WAEfC,QAzDK,SAyDGC,GACJ1D,EAAImC,YAAY,CACZC,MAAO,WAEX,IAAMQ,EAAQnE,KACRkF,EAAM3D,EAAI4D,oBAAoB,WAAYhB,GAE1CnC,EAAamC,EAAMnC,WACnBoD,EAASjB,EAAMlD,IACfoE,EAAOlB,EAAMb,WAAaa,EAAMzC,MAChC4D,EAAOnB,EAAMZ,YAAcY,EAAMzC,MACjCC,EAASwC,EAAMxC,OACjB4D,EAAKpB,EAAMhC,aAAegC,EAAM3B,GAAK2B,EAAMb,WAAa+B,GAAQ,EAChEG,EAAKrB,EAAM/B,aAAe+B,EAAM1B,GAAK0B,EAAMZ,YAAc+B,GAAQ,EAOrE,OALAJ,EAAIO,aAAa,SACjBP,EAAIQ,SAAS,EAAG,EAAGL,EAAMC,GACzBJ,EAAIS,OAEJT,EAAIvD,OAAiB,GAATA,EAAciE,KAAKC,GAAM,KAC7BlE,GACJ,KAAK,EACD4D,IAAOD,EAAKD,GAAQ,EACpBG,IAAOF,EAAKD,GAAQ,EACpBH,EAAIY,UAAUV,GAASI,EAAID,EAAIF,GAAOC,GACtC,MACJ,KAAK,EACDJ,EAAIY,UAAUV,EAAQG,EAAIC,GAAKH,GAAOC,GACtC,MACJ,KAAK,EACDC,IAAOD,EAAKD,GAAQ,EACpBG,IAAOF,EAAKD,GAAQ,EACpBH,EAAIY,UAAUV,EAAQI,GAAKD,GAAKF,EAAMC,GACtC,MACJ,QACIJ,EAAIY,UAAUV,GAASG,GAAKC,EAAIH,EAAMC,GAG9CJ,EAAIa,UACJb,EAAIc,MAAK,EAAO,WACZzE,EAAI0E,qBAAqB,CACrBC,SAAU,WACVC,UAAWhC,EAAMvC,MAAQI,EACzBoE,WAAYjC,EAAMtC,MAAQG,EAC1BwC,QAAS,SAACC,GACNlD,EAAIwC,cACJkB,EAAMoB,OAAOC,aAAe7B,EAAI6B,aAChCnC,EAAM1C,MAAO,EACb0C,EAAMY,MAAM,UAAWE,IAE3BJ,KAAM,SAACf,GACHvC,EAAIwC,cACJxC,EAAI0C,UAAU,CACVN,MAAO,KACPO,QAAS,WAGlBC,MAIXoC,cAtHK,SAsHSzC,GACV,GAAuB,GAApBA,EAAE0C,QAAQ1D,OAAa,CACtB9C,KAAK2C,SAAW3C,KAAK0B,MACrB1B,KAAKyG,SAAU,EACf,IAAMjE,EAAIsB,EAAE0C,QAAQ,GAAGE,MAAQ5C,EAAE0C,QAAQ,GAAGE,MACtCjE,EAAIqB,EAAE0C,QAAQ,GAAGG,MAAQ7C,EAAE0C,QAAQ,GAAGG,MACtCC,EAAahB,KAAKiB,KACpBjB,KAAKkB,IAAItE,EAAG,GACZoD,KAAKkB,IAAIrE,EAAG,IAGhBzC,KAAK0C,OAASkD,KAAKmB,IAAIvE,EAAGC,EAAGmE,GAC7BrF,EAAI0C,UAAU,CACVC,QAASlE,KAAK0C,cAGlB1C,KAAKqC,OAASyB,EAAE0C,QAAQ,GAAGE,MAAQ1G,KAAKwC,EACxCxC,KAAKsC,OAASwB,EAAE0C,QAAQ,GAAGG,MAAQ3G,KAAKyC,GAGhDuE,WA1IK,SA0IMlD,GACP,GAAG9D,KAAKyG,QAAS,CACb,IAAI/E,EAAQ1B,KAAK2C,SAEXH,EAAIsB,EAAE0C,QAAQ,GAAGE,MAAQ5C,EAAE0C,QAAQ,GAAGE,MACtCjE,EAAIqB,EAAE0C,QAAQ,GAAGG,MAAQ7C,EAAE0C,QAAQ,GAAGG,MACtCC,EAAahB,KAAKiB,KACpBjB,KAAKkB,IAAItE,EAAG,GACZoD,KAAKkB,IAAIrE,EAAG,IAKVwE,EAFOrB,KAAKmB,IAAIvE,EAAGC,EAAGmE,GAET5G,KAAK0C,OAIpBwE,EAAM,EAMJC,GADND,GAJAA,EACIA,EAAMlH,KAAKsD,WAAa4D,EAAMlH,KAAKuD,YAC7B2D,EAAMlH,KAAKuD,YACX2D,EAAMlH,KAAKsD,YACT,GAAM,GAAM4D,GACND,EAEdA,EAAM,EACNvF,GAASkE,KAAKwB,IAAID,GACXF,EAAM,GACbvF,EAAQkE,KAAKwB,IAAID,KAAQzF,GAASkE,KAAKwB,IAAID,IAG/CnH,KAAK0B,MAAQA,MACV,CACH,IAAM2F,EAAQvD,EAAE0C,QAAQ,GAAGE,MAAQ1G,KAAKqC,OAClCiF,EAAQxD,EAAE0C,QAAQ,GAAGG,MAAQ3G,KAAKsC,OAExCtC,KAAKwC,EAAI6E,EACTrH,KAAKyC,EAAI6E,IAGjBC,WAlLK,WAkLQ,IAAAC,EAAAxH,KACTyH,WAAW,WACPD,EAAKf,SAAU,GAChB,MAEPiB,WAvLK,SAuLM5D,GACP9D,KAAKqC,OAASyB,EAAE0C,QAAQ,GAAGE,MAAQ1G,KAAKmC,aACxCnC,KAAKsC,OAASwB,EAAE0C,QAAQ,GAAGG,MAAQ3G,KAAKoC,aAExCpC,KAAK8B,SAAW9B,KAAK4B,MACrB5B,KAAK+B,SAAW/B,KAAK6B,OAEzB8F,YA9LK,SA8LO7D,GACR,IAAMuD,EAAQrH,KAAK4H,OAAO9D,EAAE0C,QAAQ,GAAGE,MAAQ1G,KAAKqC,QAC9CiF,EAAQtH,KAAK6H,OAAO/D,EAAE0C,QAAQ,GAAGG,MAAQ3G,KAAKsC,QAEpDtC,KAAKmC,aAAekF,EACpBrH,KAAKoC,aAAekF,GAExBQ,SArMK,SAqMIhE,EAAGnD,GACR,GAAGX,KAAKe,UACJ,OAAO,EAEX,IAAMsG,EAAQvD,EAAE0C,QAAQ,GAAGE,MAAQ1G,KAAKqC,OAClCiF,EAAQxD,EAAE0C,QAAQ,GAAGG,MAAQ3G,KAAKsC,OACxC,OAAQ3B,GACJ,IAAK,WACDX,KAAK+H,cAAcV,GACnBrH,KAAKgI,aAAaV,GAClB,MACJ,IAAK,aACDtH,KAAKgI,aAAaV,GAClB,MACJ,IAAK,YACDtH,KAAKgI,aAAaV,GAClBtH,KAAKiI,eAAeZ,GACpB,MACJ,IAAK,eACDrH,KAAKiI,eAAeZ,GACpB,MACJ,IAAK,eACDrH,KAAKiI,eAAeZ,GACpBrH,KAAKkI,gBAAgBZ,GACrB,MACJ,IAAK,gBACDtH,KAAKkI,gBAAgBZ,GACrB,MACJ,IAAK,cACDtH,KAAKkI,gBAAgBZ,GACrBtH,KAAK+H,cAAcV,GACnB,MACJ,IAAK,cACDrH,KAAK+H,cAAcV,KAM/BW,aA5OK,SA4OQvF,GACT,IAAM0F,EAAOnI,KAAK6H,OAAOpF,GACzBzC,KAAK6B,OAAS7B,KAAKoC,aAAe+F,EAClCnI,KAAKoC,aAAe+F,GAExBF,eAjPK,SAiPUzF,GACX,GAAGxC,KAAK8B,SAAWU,GAAKxC,KAAKoD,YAAcpD,KAAKuC,OAC5C,OAAO,EAEXvC,KAAK4B,MAAQ5B,KAAK8B,UAAYU,EAAKxC,KAAKmC,eAE5C+F,gBAvPK,SAuPWzF,GACZ,GAAGzC,KAAK+B,SAAWU,GAAKzC,KAAKmD,aAAenD,KAAKiD,aAAejD,KAAKuC,OACjE,OAAO,EAEXvC,KAAK6B,MAAQ7B,KAAK+B,UAAYU,EAAKzC,KAAKoC,eAE5C2F,cA7PK,SA6PSvF,GACV,IAAM4F,EAAQpI,KAAK6H,OAAOrF,GAC1BxC,KAAK4B,OAAS5B,KAAKmC,aAAeiG,EAClCpI,KAAKmC,aAAeiG,GAExBR,OAlQK,SAkQEpF,GACH,OAAGA,GAAKxC,KAAKuC,OACFvC,KAAKuC,OAEbC,EAAIxC,KAAK4B,OAAS5B,KAAKoD,YAAcpD,KAAKuC,OAClCvC,KAAKoD,YAAcpD,KAAK4B,MAAQ5B,KAAKuC,OAEzCC,GAEXqF,OA3QK,SA2QEpF,GACH,OAAGA,GAAKzC,KAAKuC,OACFvC,KAAKuC,OAEbE,EAAIzC,KAAK6B,OAAS7B,KAAKmD,aAAenD,KAAKiD,aAAejD,KAAKuC,OACvDvC,KAAKmD,aAAenD,KAAK6B,MAAQ7B,KAAKiD,aAAejD,KAAKuC,OAE9DE;;;;2DChbnB5D,EAAAC,EAAAC,GAAA,IAAAsJ,EAAAxJ,itCAAA,KAAAyJ,EAAAzJ,EAAA0B,EAAA8H,GAAA,QAAAnJ,KAAAmJ,EAAA,YAAAnJ,GAAA,SAAAC,GAAAN,EAAAO,EAAAL,EAAAI,EAAA,kBAAAkJ,EAAAlJ,KAAA,CAAAD,GAA+wCH,EAAA,QAAAuJ,EAAG","file":"components/invinbg-image-cropper/invinbg-image-cropper.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./invinbg-image-cropper.vue?vue&type=template&id=4c9dca4c&scoped=true&\"\nvar renderjs\nimport script from \"./invinbg-image-cropper.vue?vue&type=script&lang=js&\"\nexport * from \"./invinbg-image-cropper.vue?vue&type=script&lang=js&\"\nimport style0 from \"./invinbg-image-cropper.vue?vue&type=style&index=0&id=4c9dca4c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4c9dca4c\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('4c9dca4c')) {\n      api.createRecord('4c9dca4c', component.options)\n    } else {\n      api.reload('4c9dca4c', component.options)\n    }\n    module.hot.accept(\"./invinbg-image-cropper.vue?vue&type=template&id=4c9dca4c&scoped=true&\", function () {\n      api.rerender('4c9dca4c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/vincent/Documents/project/code/oneself/jinxiaocun/components/invinbg-image-cropper/invinbg-image-cropper.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./invinbg-image-cropper.vue?vue&type=template&id=4c9dca4c&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./invinbg-image-cropper.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./invinbg-image-cropper.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    name: 'image-cropper',\n    props: {\n        cropWidth: {\n            type: Number,\n            default: 200,\n        },\n        cropHeight: {\n            type: Number,\n            default: 200\n        },\n        cropFixed: {\n            type: Boolean,\n            default: false,\n        },\n        src: {\n            type: String,\n        },\n        showResetBtn: {\n            type: Boolean,\n            default: true,\n        },\n        showRotateBtn: {\n            type: Boolean,\n            default: true,\n        }\n    },\n    data() {\n        const sysInfo = uni.getSystemInfoSync();\n        const pixelRatio = sysInfo.pixelRatio\n        return {\n            show: false,\n            scale: 1,\n            rotate: 0,\n            cropW: 0,\n            cropH: 0,\n            cropOldW: 0,\n            cropOldH: 0,\n            sysInfo: sysInfo,\n            pixelRatio: pixelRatio,\n            imageRealWidth: 0,\n            imageRealHeight: 0,\n            cropOffsertX: 0,\n            cropOffsertY: 0,\n            startX: 0,\n            startY: 0,\n            // 裁剪框与边界间距\n            border: 5,\n            x: 0,\n            y: 0,\n            startL: 0,\n            oldScale: 1,\n        }\n    },\n    watch: {\n        src(val) {\n            if(val.length > 0) {\n                this.init()\n            }\n        },\n        show(val) {\n            if(!val) {\n                this.src = ''\n            }\n        }\n    },\n    computed: {\n        containerTop() {\n            let top = 0\n\n\n\n            return top;\n        },\n        // 容器高度\n        containerHeight() {\n            return this.windowHeight - 48;\n        },\n        // 屏幕宽度\n        windowWidth() {\n            return this.sysInfo.windowWidth;\n        },\n        windowHeight() {\n            return this.sysInfo.windowHeight;\n        },\n        // 图片宽高比\n        imageRatio() {\n            if (this.imageRealHeight > 0) {\n                return this.imageRealWidth / this.imageRealHeight\n            }\n            return 0\n        },\n        // 等比缩放后的宽度\n        imageWidth() {\n            if (this.imageRatio >= 1) {\n                return this.windowWidth\n            }\n            return this.windowWidth * this.imageRatio\n        },\n        // 等比缩放后的高度\n        imageHeight() {\n            if (this.imageRatio >= 1) {\n                return this.windowWidth / this.imageRatio\n            }\n            return this.windowWidth\n        },\n    },\n    methods: {\n        rotateHandler() {\n            if(this.rotate == 3) {\n                this.rotate = 0;\n            } else {\n                ++this.rotate\n            }\n        },\n        init() {\n            this.rotate = 0;\n            this.scale = 1;\n            this.cropW = this.cropWidth\n            this.cropH = this.cropHeight\n            uni.showLoading({\n                title: '图片加载中...',\n            })\n            this.loadImage(this.src).then((e) => {\n                uni.hideLoading()\n            }).catch((e) => {\n                uni.hideLoading()\n                uni.showModal({\n                    title: '标题',\n                    content: '图片加载失败'\n                })\n            })\n        },\n        loadImage(src) {\n            const _this = this\n            return new Promise((resolve, reject) => {\n                uni.getImageInfo({\n                    src: src,\n                    success: (res) => {\n                        _this.imageRealWidth = res.width\n                        _this.imageRealHeight = res.height\n\n                        _this.cropOffsertX = _this.windowWidth / 2 - _this.cropW / 2\n                        _this.cropOffsertY = _this.windowHeight / 2 - _this.cropH / 2\n                        _this.show = true\n\n                        _this.$nextTick(() => {\n                            _this.x = _this.windowWidth / 2 - _this.imageWidth / 2\n                            _this.y = _this.containerHeight / 2 - _this.imageHeight / 2\n                        });\n                        resolve(res)\n                    },\n                    fail: (e) => {\n                        _this.show = false\n                        reject(e)\n                    }\n                })\n            });\n\n        },\n        cancel() {\n            this.show = false\n            this.$emit('cancel')\n        },\n        confirm(event) {\n            uni.showLoading({\n                title: '裁剪中...',\n            })\n            const _this = this\n            const ctx = uni.createCanvasContext('myCanvas', _this);\n\n            const pixelRatio = _this.pixelRatio\n            const imgage = _this.src\n            const imgW = _this.imageWidth * _this.scale;\n            const imgH = _this.imageHeight * _this.scale\n            const rotate = _this.rotate\n            let dx = _this.cropOffsertX - _this.x - (_this.imageWidth - imgW) / 2;\n            let dy = _this.cropOffsertY - _this.y - (_this.imageHeight - imgH) / 2;\n\n            ctx.setFillStyle('white')\n            ctx.fillRect(0, 0, imgW, imgH)\n            ctx.save()\n\n            ctx.rotate((rotate * 90 * Math.PI) / 180);\n            switch (rotate) {\n                case 1:\n                    dx += (imgH-imgW) / 2\n                    dy -= (imgH-imgW) / 2\n                    ctx.drawImage(imgage, -dy, dx, imgW, -imgH);\n                    break;\n                case 2:\n                    ctx.drawImage(imgage, dx, dy, -imgW, -imgH);\n                    break;\n                case 3:\n                    dx += (imgH-imgW) / 2\n                    dy -= (imgH-imgW) / 2\n                    ctx.drawImage(imgage, dy, -dx, -imgW, imgH);\n                    break;\n                default:\n                    ctx.drawImage(imgage, -dx, -dy, imgW, imgH);\n                    break;\n            }\n            ctx.restore()\n            ctx.draw(false, () => {\n                uni.canvasToTempFilePath({\n                    canvasId: 'myCanvas',\n                    destWidth: _this.cropW * pixelRatio,\n                    destHeight: _this.cropH * pixelRatio,\n                    success: (res) => {\n                        uni.hideLoading()\n                        event.detail.tempFilePath = res.tempFilePath\n                        _this.show = false\n                        _this.$emit('confirm', event)\n                    },\n                    fail: (e) => {\n                        uni.hideLoading()\n                        uni.showModal({\n                            title: '提示',\n                            content: '裁剪失败'\n                        })\n                    }\n                }, _this);\n            })\n\n        },\n        imgTouchStart(e) {\n            if(e.touches.length == 2) {\n                this.oldScale = this.scale\n                this.scaling = true\n                const x = e.touches[0].pageX - e.touches[1].pageX\n                const y = e.touches[0].pageY - e.touches[1].pageY\n                const hypotenuse = Math.sqrt(\n                    Math.pow(x, 2) +\n                    Math.pow(y, 2)\n                )\n\n                this.startL = Math.max(x, y, hypotenuse)\n                uni.showModal({\n                    content: this.startL\n                })\n            } else {\n                this.startX = e.touches[0].pageX - this.x\n                this.startY = e.touches[0].pageY - this.y\n            }\n        },\n        imgMoveing(e) {\n            if(this.scaling) {\n                let scale = this.oldScale\n\n                const x = e.touches[0].pageX - e.touches[1].pageX\n                const y = e.touches[0].pageY - e.touches[1].pageY\n                const hypotenuse = Math.sqrt(\n                    Math.pow(x, 2) +\n                    Math.pow(y, 2)\n                )\n\n                const newL = Math.max(x, y, hypotenuse)\n\n                const cha = newL - this.startL;\n\n                // 根据图片本身大小 决定每次改变大小的系数, 图片越大系数越小\n                // 1px - 0.2\n                let coe = 1;\n                coe =\n                    coe / this.imageWidth > coe / this.imageHeight\n                        ? coe / this.imageHeight\n                        : coe / this.imageWidth;\n                coe = coe > 0.1 ? 0.1 : coe;\n                const num = coe * cha;\n\n                if (cha > 0) {\n                    scale += Math.abs(num);\n                } else if (cha < 0) {\n                    scale > Math.abs(num) ? (scale -= Math.abs(num)) : scale;\n                }\n\n                this.scale = scale;\n            } else {\n                const moveX = e.touches[0].pageX - this.startX\n                const moveY = e.touches[0].pageY - this.startY\n\n                this.x = moveX\n                this.y = moveY\n            }\n        },\n        imgMoveEnd() {\n            setTimeout(() => {\n                this.scaling = false\n            }, 100)\n        },\n        touchStart(e) {\n            this.startX = e.touches[0].pageX - this.cropOffsertX;\n            this.startY = e.touches[0].pageY - this.cropOffsertY;\n\n            this.cropOldW = this.cropW\n            this.cropOldH = this.cropH\n        },\n        cropMoveing(e) {\n            const moveX = this._cropX(e.touches[0].pageX - this.startX)\n            const moveY = this._cropY(e.touches[0].pageY - this.startY)\n\n            this.cropOffsertX = moveX\n            this.cropOffsertY = moveY\n        },\n        dragMove(e, type) {\n            if(this.cropFixed) {\n                return false\n            }\n            const moveX = e.touches[0].pageX - this.startX\n            const moveY = e.touches[0].pageY - this.startY\n            switch (type) {\n                case 'left-top':\n                    this._cropMoveLeft(moveX)\n                    this._cropMoveTop(moveY)\n                    break;\n                case 'middle-top':\n                    this._cropMoveTop(moveY)\n                    break;\n                case 'right-top':\n                    this._cropMoveTop(moveY)\n                    this._cropMoveRight(moveX)\n                    break;\n                case 'middle-right':\n                    this._cropMoveRight(moveX)\n                    break;\n                case 'right-bottom':\n                    this._cropMoveRight(moveX)\n                    this._cropMoveBottom(moveY)\n                    break;\n                case 'middle-bottom':\n                    this._cropMoveBottom(moveY)\n                    break;\n                case 'left-bottom':\n                    this._cropMoveBottom(moveY)\n                    this._cropMoveLeft(moveX)\n                    break;\n                case 'middle-left':\n                    this._cropMoveLeft(moveX)\n                    break;\n                default:\n                    break;\n            }\n        },\n        _cropMoveTop(y) {\n            const topY = this._cropY(y)\n            this.cropH += this.cropOffsertY - topY\n            this.cropOffsertY = topY\n        },\n        _cropMoveRight(x) {\n            if(this.cropOldW + x >= this.windowWidth - this.border) {\n                return false;\n            }\n            this.cropW = this.cropOldW + (x  - this.cropOffsertX)\n        },\n        _cropMoveBottom(y) {\n            if(this.cropOldH + y >= this.windowHeight - this.containerTop - this.border) {\n                return false;\n            }\n            this.cropH = this.cropOldH + (y  - this.cropOffsertY)\n        },\n        _cropMoveLeft(x) {\n            const leftX = this._cropY(x)\n            this.cropW += this.cropOffsertX - leftX\n            this.cropOffsertX = leftX\n        },\n        _cropX(x) {\n            if(x <= this.border) {\n                return this.border\n            }\n            if(x + this.cropW >= this.windowWidth - this.border) {\n                return this.windowWidth - this.cropW - this.border\n            }\n            return x\n        },\n        _cropY(y) {\n            if(y <= this.border) {\n                return this.border\n            }\n            if(y + this.cropH >= this.windowHeight - this.containerTop - this.border) {\n                return this.windowHeight - this.cropH - this.containerTop - this.border\n            }\n            return y\n        }\n    }\n}\n","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./invinbg-image-cropper.vue?vue&type=style&index=0&id=4c9dca4c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./invinbg-image-cropper.vue?vue&type=style&index=0&id=4c9dca4c&scoped=true&lang=css&\""],"sourceRoot":""}